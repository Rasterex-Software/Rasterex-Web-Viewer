!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("UIExtension"),require("UIExtension").PDFViewCtrl.commons):"function"==typeof define&&define.amd?define(["UIExtension",["UIExtension","PDFViewCtrl","commons"]],t):"object"==typeof exports?exports.Comparison=t(require("UIExtension"),require("UIExtension").PDFViewCtrl.commons):e.Comparison=t(e.UIExtension,e.UIExtension.PDFViewCtrl.commons)}(self,((e,t)=>(()=>{var n={742:(e,t,n)=>{n(779);e.exports=function(e){"use strict";e=e||{};return'<layer class="center fv__ui-comparison-options-dialog websdk-modal" @var.dialog="$component" style="width: 680px" append-to="body">\n<layer-header\n@draggable="{type: \'parent\'}"\ntitle="comparison:options-dialog.title"\n></layer-header>\n<layer-view class="fv__ui-comparison-dialog-body">\n<div class="fv__ui-layout-row">\n<div class="fv__ui-layout-col-1">\n<fieldset class="fv__ui-comparison-fieldset">\n<legend>comparison:options-dialog.include</legend>\n<div class="fv__ui-comparison-fieldset-content">\n<form-group label="comparison:options-dialog.compareTextOnly" direction="rtl">\n<checkbox  @model="dialog.currentOptions.compareTextOnly" name="compareTextOnly"></checkbox>\n</form-group>\n<form-group label="comparison:options-dialog.compareTable" direction="rtl">\n<checkbox  @model="dialog.currentOptions.compareTable" name="compareTable"></checkbox>\n</form-group>\n<form-group label="comparison:options-dialog.detectPage" direction="rtl">\n<checkbox  @model="dialog.currentOptions.detectPageDeletionsOrInserts" name="detectPageDeletionsOrInserts"></checkbox>\n</form-group>\n</div>\n</fieldset>\n</div>\n<div class="fv__ui-layout-col-1">\n<fieldset class="fv__ui-comparison-fieldset">\n<legend>comparison:options-dialog.markingColor</legend>\n<div class="fv__ui-comparison-fieldset-content">\n<form-group label="comparison:options-dialog.replaceObjects">\n<inline-color-picker name="fv--comparison-options-replace-marking-color" @model="dialog.currentOptions.markingColor.replace|comparison:color"></inline-color-picker>\n</form-group>\n<form-group label="comparison:options-dialog.insertObjects">\n<inline-color-picker name="fv--comparison-options-insert-marking-color" @model="dialog.currentOptions.markingColor.insert|comparison:color"></inline-color-picker>\n</form-group>\n<form-group label="comparison:options-dialog.deleteObjects">\n<inline-color-picker name="fv--comparison-options-delete-marking-color" @model="dialog.currentOptions.markingColor.delete|comparison:color"></inline-color-picker>\n</form-group>\n</div>\n</fieldset>\n</div>\n</div>\n<div class="fv__ui-layout-row">\n<div class="fv__ui-layout-col-1">\n<fieldset class="fv__ui-comparison-fieldset">\n<legend>comparison:options-dialog.opacity</legend>\n<div class="fv__ui-comparison-fieldset-content fv__ui-comparison-options-checkbox-list">\n<form-group label="comparison:options-dialog.replaceObjects">\n<number type="number" min="0" max="100" step="1" suffix="%" @model="dialog.currentOptions.opacity.replace" name="fv--comparison-options-replace-opacity-replace"></number>\n</form-group>\n<form-group label="comparison:options-dialog.insertObjects">\n<number type="number" min="0" max="100" step="1" suffix="%" @model="dialog.currentOptions.opacity.insert" name="fv--comparison-options-replace-opacity-insert"></number>\n</form-group>\n<form-group label="comparison:options-dialog.deleteObjects">\n<number type="number" min="0" max="100" step="1" suffix="%" @model="dialog.currentOptions.opacity.delete" name="fv--comparison-options-replace-opacity-delete"></number>\n</form-group>\n</div>\n</fieldset>\n</div>\n<div class="fv__ui-layout-col-1">\n<fieldset class="fv__ui-comparison-fieldset">\n<legend>comparison:options-dialog.lineThickness</legend>\n<div class="fv__ui-comparison-fieldset-content fv__ui-comparison-options-checkbox-list">\n<form-group label="comparison:options-dialog.replaceObjects">\n<number type="number" min="1" max="12" step="1" @model="dialog.currentOptions.lineThickness.replace"  name="fv--comparison-options-replace-lineThickness-replace"></number>\n</form-group>\n<form-group label="comparison:options-dialog.insertObjects">\n<number type="number" min="1" max="12" step="1" @model="dialog.currentOptions.lineThickness.insert"  name="fv--comparison-options-replace-lineThickness-insert"></number>\n</form-group>\n<form-group label="comparison:options-dialog.deleteObjects">\n<number type="number" min="1" max="12" step="1" @model="dialog.currentOptions.lineThickness.delete"  name="fv--comparison-options-replace-lineThickness-delete"></number>\n</form-group>\n</div>\n</fieldset>\n</div>\n</div>\n</layer-view>\n<div class="fv__ui-comparison-dialog-footer fv__ui-layout-row">\n<div class="fv__ui-layout-col-1">\n<form-group label="comparison:options-dialog.setAsDefault" direction="rtl">\n<checkbox @model="dialog.saveAsDefault"></checkbox>\n</form-group>\n</div>\n<div class="fv__ui-layout-col-1 fv__ui-comparison-footer-buttons">\n<xbutton text="dialog.ok" class="fv__ui-dialog-button fv__ui-dialog-ok-button" name="fv__ui-dialog-ok-button" @on.click="dialog.ok()"></xbutton>\n<xbutton text="dialog.cancel" class="fv__ui-dialog-button fv__ui-dialog-cancel-button" name="fv__ui-dialog-cancel-button" @on.click="dialog.cancel()" @cannotBeDisabled></xbutton>\n</div>\n</div>\n</layer>','<layer class="center fv__ui-comparison-options-dialog websdk-modal" @var.dialog="$component" style="width: 680px" append-to="body">\n<layer-header\n@draggable="{type: \'parent\'}"\ntitle="comparison:options-dialog.title"\n></layer-header>\n<layer-view class="fv__ui-comparison-dialog-body">\n<div class="fv__ui-layout-row">\n<div class="fv__ui-layout-col-1">\n<fieldset class="fv__ui-comparison-fieldset">\n<legend>comparison:options-dialog.include</legend>\n<div class="fv__ui-comparison-fieldset-content">\n<form-group label="comparison:options-dialog.compareTextOnly" direction="rtl">\n<checkbox  @model="dialog.currentOptions.compareTextOnly" name="compareTextOnly"></checkbox>\n</form-group>\n<form-group label="comparison:options-dialog.compareTable" direction="rtl">\n<checkbox  @model="dialog.currentOptions.compareTable" name="compareTable"></checkbox>\n</form-group>\n<form-group label="comparison:options-dialog.detectPage" direction="rtl">\n<checkbox  @model="dialog.currentOptions.detectPageDeletionsOrInserts" name="detectPageDeletionsOrInserts"></checkbox>\n</form-group>\n</div>\n</fieldset>\n</div>\n<div class="fv__ui-layout-col-1">\n<fieldset class="fv__ui-comparison-fieldset">\n<legend>comparison:options-dialog.markingColor</legend>\n<div class="fv__ui-comparison-fieldset-content">\n<form-group label="comparison:options-dialog.replaceObjects">\n<inline-color-picker name="fv--comparison-options-replace-marking-color" @model="dialog.currentOptions.markingColor.replace|comparison:color"></inline-color-picker>\n</form-group>\n<form-group label="comparison:options-dialog.insertObjects">\n<inline-color-picker name="fv--comparison-options-insert-marking-color" @model="dialog.currentOptions.markingColor.insert|comparison:color"></inline-color-picker>\n</form-group>\n<form-group label="comparison:options-dialog.deleteObjects">\n<inline-color-picker name="fv--comparison-options-delete-marking-color" @model="dialog.currentOptions.markingColor.delete|comparison:color"></inline-color-picker>\n</form-group>\n</div>\n</fieldset>\n</div>\n</div>\n<div class="fv__ui-layout-row">\n<div class="fv__ui-layout-col-1">\n<fieldset class="fv__ui-comparison-fieldset">\n<legend>comparison:options-dialog.opacity</legend>\n<div class="fv__ui-comparison-fieldset-content fv__ui-comparison-options-checkbox-list">\n<form-group label="comparison:options-dialog.replaceObjects">\n<number type="number" min="0" max="100" step="1" suffix="%" @model="dialog.currentOptions.opacity.replace" name="fv--comparison-options-replace-opacity-replace"></number>\n</form-group>\n<form-group label="comparison:options-dialog.insertObjects">\n<number type="number" min="0" max="100" step="1" suffix="%" @model="dialog.currentOptions.opacity.insert" name="fv--comparison-options-replace-opacity-insert"></number>\n</form-group>\n<form-group label="comparison:options-dialog.deleteObjects">\n<number type="number" min="0" max="100" step="1" suffix="%" @model="dialog.currentOptions.opacity.delete" name="fv--comparison-options-replace-opacity-delete"></number>\n</form-group>\n</div>\n</fieldset>\n</div>\n<div class="fv__ui-layout-col-1">\n<fieldset class="fv__ui-comparison-fieldset">\n<legend>comparison:options-dialog.lineThickness</legend>\n<div class="fv__ui-comparison-fieldset-content fv__ui-comparison-options-checkbox-list">\n<form-group label="comparison:options-dialog.replaceObjects">\n<number type="number" min="1" max="12" step="1" @model="dialog.currentOptions.lineThickness.replace"  name="fv--comparison-options-replace-lineThickness-replace"></number>\n</form-group>\n<form-group label="comparison:options-dialog.insertObjects">\n<number type="number" min="1" max="12" step="1" @model="dialog.currentOptions.lineThickness.insert"  name="fv--comparison-options-replace-lineThickness-insert"></number>\n</form-group>\n<form-group label="comparison:options-dialog.deleteObjects">\n<number type="number" min="1" max="12" step="1" @model="dialog.currentOptions.lineThickness.delete"  name="fv--comparison-options-replace-lineThickness-delete"></number>\n</form-group>\n</div>\n</fieldset>\n</div>\n</div>\n</layer-view>\n<div class="fv__ui-comparison-dialog-footer fv__ui-layout-row">\n<div class="fv__ui-layout-col-1">\n<form-group label="comparison:options-dialog.setAsDefault" direction="rtl">\n<checkbox @model="dialog.saveAsDefault"></checkbox>\n</form-group>\n</div>\n<div class="fv__ui-layout-col-1 fv__ui-comparison-footer-buttons">\n<xbutton text="dialog.ok" class="fv__ui-dialog-button fv__ui-dialog-ok-button" name="fv__ui-dialog-ok-button" @on.click="dialog.ok()"></xbutton>\n<xbutton text="dialog.cancel" class="fv__ui-dialog-button fv__ui-dialog-cancel-button" name="fv__ui-dialog-cancel-button" @on.click="dialog.cancel()" @cannotBeDisabled></xbutton>\n</div>\n</div>\n</layer>'}},331:(e,t,n)=>{n(779);e.exports=function(e){"use strict";e=e||{};return'<div class="fv__ui-comparison-previewer-wrapper" @var.self="$component">\n<div class="fv__ui-comparison-previewer-content" @init="self.previewerContainer = $component">\n</div>\n<div class="fv__ui-comparison-previewer-controls" name="fv--comparison-previewer-controls">\n<slider\nmin="1"\n@setter.max="self.pageNumbers.length || 2"\nstep="1"\n@on.change="self.previewPage($component.value)"\n@init="self.pageSlider = $component"\nclass="fv__ui-slider-no-input"\n@disable.late="self.pageNumbers.length === 0"\nname="fv--comparison-previewer-page-slider"\n>\n</slider>\n<dropdown\neditable\nname="fv--comparison-previewer-page-dropdown"\n@init="self.pageDropdown = $component"\n@on.change="self.previewPage($component.getEditValue())"\n@disable.late="self.pageNumbers.length === 0"\n>\n<xbutton @foreach="index in self.pageNumbers" @on.click="self.previewPage(index)">@{index}</xbutton>\n</dropdown>\n</div>\n</div>\n','<div class="fv__ui-comparison-previewer-wrapper" @var.self="$component">\n<div class="fv__ui-comparison-previewer-content" @init="self.previewerContainer = $component">\n</div>\n<div class="fv__ui-comparison-previewer-controls" name="fv--comparison-previewer-controls">\n<slider\nmin="1"\n@setter.max="self.pageNumbers.length || 2"\nstep="1"\n@on.change="self.previewPage($component.value)"\n@init="self.pageSlider = $component"\nclass="fv__ui-slider-no-input"\n@disable.late="self.pageNumbers.length === 0"\nname="fv--comparison-previewer-page-slider"\n>\n</slider>\n<dropdown\neditable\nname="fv--comparison-previewer-page-dropdown"\n@init="self.pageDropdown = $component"\n@on.change="self.previewPage($component.getEditValue())"\n@disable.late="self.pageNumbers.length === 0"\n>\n<xbutton @foreach="index in self.pageNumbers" @on.click="self.previewPage(index)">@{index}</xbutton>\n</dropdown>\n</div>\n</div>\n'}},706:(e,t,n)=>{n(779);e.exports=function(e){"use strict";e=e||{};return'<div class="fv__ui-comparison-select-compare-range fv__ui-layout-row" @var.self="$component">\n<form-group tag="div" @setter.label="self.label" class="fv__ui-layout-col-1 fv__ui-layout-row">\n<dropdown\nseparate="false"\nname="fv__ui-comparison-select-range-from"\n@disable="self.pageNumberList.length === 0"\n@init="self.fromDropdown = $component"\n>\n<xbutton\n@foreach="pageNumber in self.pageNumberList"\n@on.click="self.selectFromPageNumber(pageNumber)"\n@setter.text="pageNumber + \'\'"\n></xbutton>\n</dropdown>\n</form-group>\n<form-group tag="div" label="comparison:select-pdf-file.to" class="fv__ui-layout-col-1 fv__ui-layout-row">\n<dropdown\nseparate="false"\nname="fv__ui-comparison-select-range-to"\n@disable="self.pageNumberList.length === 0"\n@init="self.toDropdown = $component"\n>\n<xbutton\n@foreach="pageNumber in self.pageNumberList"\n@on.click="self.selectToPageNumber(pageNumber)"\n@setter.text="pageNumber + \'\'"\n></xbutton>\n</dropdown>\n</form-group>\n</div>','<div class="fv__ui-comparison-select-compare-range fv__ui-layout-row" @var.self="$component">\n<form-group tag="div" @setter.label="self.label" class="fv__ui-layout-col-1 fv__ui-layout-row">\n<dropdown\nseparate="false"\nname="fv__ui-comparison-select-range-from"\n@disable="self.pageNumberList.length === 0"\n@init="self.fromDropdown = $component"\n>\n<xbutton\n@foreach="pageNumber in self.pageNumberList"\n@on.click="self.selectFromPageNumber(pageNumber)"\n@setter.text="pageNumber + \'\'"\n></xbutton>\n</dropdown>\n</form-group>\n<form-group tag="div" label="comparison:select-pdf-file.to" class="fv__ui-layout-col-1 fv__ui-layout-row">\n<dropdown\nseparate="false"\nname="fv__ui-comparison-select-range-to"\n@disable="self.pageNumberList.length === 0"\n@init="self.toDropdown = $component"\n>\n<xbutton\n@foreach="pageNumber in self.pageNumberList"\n@on.click="self.selectToPageNumber(pageNumber)"\n@setter.text="pageNumber + \'\'"\n></xbutton>\n</dropdown>\n</form-group>\n</div>'}},660:(e,t,n)=>{n(779);e.exports=function(e){"use strict";e=e||{};return'<layer class="fv__ui-comparison-select-pdf-file-dialog websdk-modal" append-to="body" backdrop @var.dialog="$component" style="width: 640px" @isolate>\n<layer-header @draggable="{type: \'parent\'}" title="comparison:select-pdf-file.title"></layer-header>\n<layer-view class="fv__ui-comparison-dialog-body">\n<fieldset class="fv__ui-comparison-fieldset">\n<legend>comparison:select-pdf-file.compareFiles</legend>\n<div class="fv__ui-comparison-fieldset-content">\n<div class="fv__ui-layout-row">\n<form-group tag="div" direction="ttb" delimiter="" class="fv__ui-layout-col-4" label="comparison:select-pdf-file.oldFile">\n<comparison:select-pdf-file target="old" name="select-pdf-file-old"></comparison:select-pdf-file>\n<comparison:selected-pdf-previewer target="old" name="select-pdf-previewer-old"></comparison:selected-pdf-previewer>\n</form-group>\n<div class="fv__ui-layout-col-2">\n<i class="fv__ui-comparison-transfer-icon" tabindex="0" @on.click="dialog.transferFiles()" @on.native.keyup="dialog.keyupHandler($event)"></i>\n</div>\n<form-group tag="div" direction="ttb" delimiter="" class="fv__ui-layout-col-4" label="comparison:select-pdf-file.newFile">\n<comparison:select-pdf-file target="new" name="select-pdf-file-new"></comparison:select-pdf-file>\n<comparison:selected-pdf-previewer target="new" name="select-pdf-previewer-new"></comparison:selected-pdf-previewer>\n</form-group>\n</div>\n</div>\n</fieldset>\n<fieldset class="fv__ui-comparison-fieldset fv__ui-comparison-select-compare-range-fieldset">\n<legend>comparison:select-pdf-file.comparePageRange</legend>\n<div class="fv__ui-comparison-fieldset-content">\n<comparison:select-compare-range target="old" name="select-compare-range-old"></comparison:select-compare-range>\n<comparison:select-compare-range target="new" name="select-compare-range-new"></comparison:select-compare-range>\n<comparison:options-dialog name="fv--comparison-options-dialog"></comparison:options-dialog>\n</div>\n</fieldset>\n</layer-view>\n<div class="fv__ui-comparison-dialog-footer fv__ui-layout-row">\n<div class="fv__ui-layout-col-1">\n<xbutton class="fv__ui-dialog-ok-button" name="select-pdf-file-options" text="comparison:select-pdf-file.options" @on.click="dialog.showOptionsDialog()" @disable="!dialog.selectedBothFiles"></xbutton>\n</div>\n<div class="fv__ui-layout-col-1 fv__ui-comparison-footer-buttons">\n<xbutton text="dialog.ok" class="fv__ui-dialog-button fv__ui-dialog-ok-button" name="fv__ui-dialog-ok-button" @on.click="dialog.ok()" @disable="!dialog.selectedBothFiles"></xbutton>\n<xbutton text="dialog.cancel" class="fv__ui-dialog-button fv__ui-dialog-cancel-button" name="fv__ui-dialog-cancel-button" @on.click="dialog.hide()" @cannotBeDisabled></xbutton>\n</div>\n</div>\n</layer>','<layer class="fv__ui-comparison-select-pdf-file-dialog websdk-modal" append-to="body" backdrop @var.dialog="$component" style="width: 640px" @isolate>\n<layer-header @draggable="{type: \'parent\'}" title="comparison:select-pdf-file.title"></layer-header>\n<layer-view class="fv__ui-comparison-dialog-body">\n<fieldset class="fv__ui-comparison-fieldset">\n<legend>comparison:select-pdf-file.compareFiles</legend>\n<div class="fv__ui-comparison-fieldset-content">\n<div class="fv__ui-layout-row">\n<form-group tag="div" direction="ttb" delimiter="" class="fv__ui-layout-col-4" label="comparison:select-pdf-file.oldFile">\n<comparison:select-pdf-file target="old" name="select-pdf-file-old"></comparison:select-pdf-file>\n<comparison:selected-pdf-previewer target="old" name="select-pdf-previewer-old"></comparison:selected-pdf-previewer>\n</form-group>\n<div class="fv__ui-layout-col-2">\n<i class="fv__ui-comparison-transfer-icon" tabindex="0" @on.click="dialog.transferFiles()" @on.native.keyup="dialog.keyupHandler($event)"></i>\n</div>\n<form-group tag="div" direction="ttb" delimiter="" class="fv__ui-layout-col-4" label="comparison:select-pdf-file.newFile">\n<comparison:select-pdf-file target="new" name="select-pdf-file-new"></comparison:select-pdf-file>\n<comparison:selected-pdf-previewer target="new" name="select-pdf-previewer-new"></comparison:selected-pdf-previewer>\n</form-group>\n</div>\n</div>\n</fieldset>\n<fieldset class="fv__ui-comparison-fieldset fv__ui-comparison-select-compare-range-fieldset">\n<legend>comparison:select-pdf-file.comparePageRange</legend>\n<div class="fv__ui-comparison-fieldset-content">\n<comparison:select-compare-range target="old" name="select-compare-range-old"></comparison:select-compare-range>\n<comparison:select-compare-range target="new" name="select-compare-range-new"></comparison:select-compare-range>\n<comparison:options-dialog name="fv--comparison-options-dialog"></comparison:options-dialog>\n</div>\n</fieldset>\n</layer-view>\n<div class="fv__ui-comparison-dialog-footer fv__ui-layout-row">\n<div class="fv__ui-layout-col-1">\n<xbutton class="fv__ui-dialog-ok-button" name="select-pdf-file-options" text="comparison:select-pdf-file.options" @on.click="dialog.showOptionsDialog()" @disable="!dialog.selectedBothFiles"></xbutton>\n</div>\n<div class="fv__ui-layout-col-1 fv__ui-comparison-footer-buttons">\n<xbutton text="dialog.ok" class="fv__ui-dialog-button fv__ui-dialog-ok-button" name="fv__ui-dialog-ok-button" @on.click="dialog.ok()" @disable="!dialog.selectedBothFiles"></xbutton>\n<xbutton text="dialog.cancel" class="fv__ui-dialog-button fv__ui-dialog-cancel-button" name="fv__ui-dialog-cancel-button" @on.click="dialog.hide()" @cannotBeDisabled></xbutton>\n</div>\n</div>\n</layer>'}},280:(e,t,n)=>{n(779);e.exports=function(e){"use strict";e=e||{};return'<div class="fv__ui-layout-row fv__ui-comparison-pdf-file-selector" @var.self="$component">\n<dropdown separate="false" class="fv__ui-comparison-pdf-file-selector-dropdown" name="fv--comparison-file-selector-dropdown" @init="self.fileListDropdown = $component">\n<xbutton\n@foreach="record in self.allSelectableFiles track by id"\n@sync.attr.record-id="record.id"\n@on.click="self.onSelectFileRecord(record)"\n@setter.text="record.filename||record.doc.metadata.Title"\n></xbutton>\n</dropdown>\n<file-selector text="comparison:select-pdf-file.choose" name="fv--comparison-file-selector" @on.change="self.onSelectedLocalFile($args[0])" accept=".pdf"></file-selector>\n</div>','<div class="fv__ui-layout-row fv__ui-comparison-pdf-file-selector" @var.self="$component">\n<dropdown separate="false" class="fv__ui-comparison-pdf-file-selector-dropdown" name="fv--comparison-file-selector-dropdown" @init="self.fileListDropdown = $component">\n<xbutton\n@foreach="record in self.allSelectableFiles track by id"\n@sync.attr.record-id="record.id"\n@on.click="self.onSelectFileRecord(record)"\n@setter.text="record.filename||record.doc.metadata.Title"\n></xbutton>\n</dropdown>\n<file-selector text="comparison:select-pdf-file.choose" name="fv--comparison-file-selector" @on.change="self.onSelectedLocalFile($args[0])" accept=".pdf"></file-selector>\n</div>'}},983:(e,t,n)=>{n(779);e.exports=function(e){"use strict";e=e||{};return'<layer class="fv__ui-comparison-legend-layer" @var.self="$component">\n<header class="fv__ui-layout-row fv__ui-comparison-legend-header" name="fv__ui-comparison-legend-header">\n<h2 class="fv__ui-layer-col-1 fv__ui-comparison-legend-title">comparison:toolbar.legend</h2>\n<button class="fv__ui-layer-col-1 fv__ui-comparison-legend-close-btn" @on.native.click="self.onClickCloseBtn()"></button>\n</header>\n<dl class="fv__ui-comparison-legend-item fv__ui-comparison-legend-replace-item" name="fv__ui-comparison-legend-replace-item">\n<dt @attr.style="\'text-decoration-color: \'+self.replaceColor">ABC</dt>\n<dd>comparison:toolbar.replace</dd>\n</dl>\n<dl class="fv__ui-comparison-legend-item fv__ui-comparison-legend-insert-item" name="fv__ui-comparison-legend-insert-item">\n<dt @attr.style="\'text-decoration-color: \'+self.insertColor">ABC<span class="fv__ui-comparison-legend-item-insert-mark" @attr.style="\'color: \'+self.insertColor"></span></dt>\n<dd>comparison:toolbar.insert</dd>\n</dl>\n<dl class="fv__ui-comparison-legend-item fv__ui-comparison-legend-delete-item" name="fv__ui-comparison-legend-delete-item">\n<dt @attr.style="\'text-decoration-color: \'+self.deleteColor">ABC<span class="fv__ui-comparison-legend-item-delete-mark" @attr.style="\'color: \'+self.deleteColor"></span></dt>\n<dd>comparison:toolbar.delete</dd>\n</dl>\n</layer>','<layer class="fv__ui-comparison-legend-layer" @var.self="$component">\n<header class="fv__ui-layout-row fv__ui-comparison-legend-header" name="fv__ui-comparison-legend-header">\n<h2 class="fv__ui-layer-col-1 fv__ui-comparison-legend-title">comparison:toolbar.legend</h2>\n<button class="fv__ui-layer-col-1 fv__ui-comparison-legend-close-btn" @on.native.click="self.onClickCloseBtn()"></button>\n</header>\n<dl class="fv__ui-comparison-legend-item fv__ui-comparison-legend-replace-item" name="fv__ui-comparison-legend-replace-item">\n<dt @attr.style="\'text-decoration-color: \'+self.replaceColor">ABC</dt>\n<dd>comparison:toolbar.replace</dd>\n</dl>\n<dl class="fv__ui-comparison-legend-item fv__ui-comparison-legend-insert-item" name="fv__ui-comparison-legend-insert-item">\n<dt @attr.style="\'text-decoration-color: \'+self.insertColor">ABC<span class="fv__ui-comparison-legend-item-insert-mark" @attr.style="\'color: \'+self.insertColor"></span></dt>\n<dd>comparison:toolbar.insert</dd>\n</dl>\n<dl class="fv__ui-comparison-legend-item fv__ui-comparison-legend-delete-item" name="fv__ui-comparison-legend-delete-item">\n<dt @attr.style="\'text-decoration-color: \'+self.deleteColor">ABC<span class="fv__ui-comparison-legend-item-delete-mark" @attr.style="\'color: \'+self.deleteColor"></span></dt>\n<dd>comparison:toolbar.delete</dd>\n</dl>\n</layer>'}},972:e=>{e.exports=null},585:(e,t,n)=>{"use strict";
/*! art-template@runtime | https://github.com/aui/art-template */var o="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:{},r=Object.create(o),i=/["&'<>]/;function a(e){return"string"!=typeof e&&(e=null==e?"":"function"==typeof e?a(e.call(e)):JSON.stringify(e)),e}r.$escape=function(e){return function(e){var t=""+e,n=i.exec(t);if(!n)return e;var o="",r=void 0,a=void 0,s=void 0;for(r=n.index,a=0;r<t.length;r++){switch(t.charCodeAt(r)){case 34:s="&#34;";break;case 38:s="&#38;";break;case 39:s="&#39;";break;case 60:s="&#60;";break;case 62:s="&#62;";break;default:continue}a!==r&&(o+=t.substring(a,r)),a=r+1,o+=s}return a!==r?o+t.substring(a,r):o}(a(e))},r.$each=function(e,t){if(Array.isArray(e))for(var n=0,o=e.length;n<o;n++)t(e[n],n);else for(var r in e)t(e[r],r)},e.exports=r},779:(e,t,n)=>{"use strict";e.exports=n(585)},616:t=>{"use strict";t.exports=e},732:e=>{"use strict";e.exports=t}},o={};function r(e){var t=o[e];if(void 0!==t)return t.exports;var i=o[e]={exports:{}};return n[e](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var i={};return(()=>{"use strict";function e(t,n){return null!=n&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?!!n[Symbol.hasInstance](t):e(t,n)}function t(t,n){if(!e(t,n))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function o(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return!t||"object"!=((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)&&"function"!=typeof t?c(e):t;var n}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=l(e);if(t){var r=l(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return u(this,n)}}r.d(i,{default:()=>Je});var d=r(616),f=d.PDFUI,m=d.UIXAddon,v=d.SeniorComponentFactory,g=d.modular,h=(d.ServiceScope,d.Directive),b=d.Controller,y=(d.Component,d.ContainerComponent,d.UIEvents),w=d.UIConsts,_=d.shared,k=(_.keyboardStatus,_.attachContextMenuEvent,d.PDFViewCtrl),S=k.PDFViewer,x=k.ViewerEvents,C=(k.DeviceInfo,k.BrowserInfo,k.storage.StorageFeature),F=k.shared,O=F.Disposable,D=F.Store,P=F.ValueStore,N=(F.debounce,F.observeResize,F.throttle,F.Draggable,F.browser,F.DebounceAsyncTaskExecutor,F.ThrottleAsyncTaskExecutor,F.QueuedAsyncTaskExecutor,F.BuiltinIntersectionObserver,F.FileFormat,F.Color),I=F.download,T=(F.securityEncryptType,F.securityUtils,k.Log.LoggerFactory,k.collab.COLLABORATION_ACTION,k.vendors.Hammer,k.PDF.DataEvents,k.Consts.PDFDocPermission,k.keyboard),j=(T.BuiltinShortcutCommand,T.BuiltinShortcutContext,T.KeyboardUtils,k.keyboard.KeyboardUtils),R=j.matchers,H=j.isMatch,A=R.Enter,E=R.Escape,B=k._internal.shared,L=(B.IoCScope,B.Lazy,B.attachKeypressEvent),V=r(972),$=r.n(V);function U(e,t,n,o,r,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(o,r)}function M(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var i=e.apply(t,n);function a(e){U(i,o,r,a,s,"next",e)}function s(e){U(i,o,r,a,s,"throw",e)}a(void 0)}))}}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(e,t,n){return q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n||e):r.value}},q(e,t,n||e)}function z(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}Object.create;Object.create;"function"==typeof SuppressedError&&SuppressedError;var G,W=g.module("comparison",[]),K=r(660),X=r.n(K),Q=r(280),Y=r.n(Q);!function(e){e.new="new",e.old="old"}(G||(G={}));var Z=function(){function e(){t(this,e),J(this,"viewer",void 0),J(this,"pdfui",void 0),J(this,"selectedNewFileStore",new P),J(this,"selectedOldFileStore",new P),J(this,"allSelectableFiles",new P([]))}return o(e,[{key:"allInjected",value:function(){var e=this,t=this.viewer.customs.closeDocBefore;this.viewer.customs.closeDocBefore=function(n,o){return e.allSelectableFiles.getCurrentValue().some((function(e){return e.doc===n}))&&(o.destroyCurrentDoc=!1),"function"!=typeof t||t()}}},{key:"addNewFileFile",value:function(e,t,n){var o=this;if(!("application/pdf"===e.type))return this.pdfui.alert({message:"alert.incorrect-filetype",level:"error"});for(var r=t,i=e.size,a=this.allSelectableFiles.getCurrentValue(),s=0;s<a.length;s++){var l=a[s].doc;if(!l.isDocModified()&&l.info.fileName===r&&l.info.fileSize===i&&l.isOwner())return void this.selectFile(l.info.id,n)}this.pdfui.loadPDFDocByFile(e,{fileName:t}).then((function(e){if(e){var r={doc:e,filename:t,id:e.id};a.push(r),o.allSelectableFiles.dispatch(a),o.selectFile(r.id,n)}}))}},{key:"addCurrentOpeningFile",value:function(){var e=this.viewer.getCurrentPDFDoc();if(e&&!e.isCompareDoc()){var t=e.id,n=e.getFileName();if(this.getFileRecordById(t))this.selectFile(t,G.old);else{var o=this.allSelectableFiles.getCurrentValue(),r={doc:e,filename:n,id:t};o.push(r),this.allSelectableFiles.dispatch(o),this.selectFile(t,G.old)}}}},{key:"unselectFile",value:function(e){switch(e){case G.new:this.selectedNewFileStore.dispatch(void 0);break;case G.old:this.selectedOldFileStore.dispatch(void 0);break;default:throw new Error("Unknown file type: ".concat(e))}}},{key:"selectFile",value:function(e,t){var n=this.getFileRecordById(e);if(!n)throw new Error("File record not found by id: ".concat(e));switch(t){case G.new:this.selectedNewFileStore.dispatch(n);break;case G.old:this.selectedOldFileStore.dispatch(n);break;default:throw new Error("Unknown file type: ".concat(t))}}},{key:"getFileRecordById",value:function(e){return this.allSelectableFiles.getCurrentValue().find((function(t){return t.id===e}))}},{key:"getSelectedFileRecordByTarget",value:function(e){return e===G.new?this.selectedNewFileStore.getCurrentValue():e===G.old?this.selectedOldFileStore.getCurrentValue():void 0}},{key:"onFileListChange",value:function(e){return this.allSelectableFiles.subscribe((function(t){return e(t)}))}},{key:"onSelectNewFile",value:function(e){return this.selectedNewFileStore.subscribe((function(t){return e(t)}))}},{key:"transferFiles",value:function(){var e=this.selectedNewFileStore.getCurrentValue(),t=this.selectedOldFileStore.getCurrentValue();e?this.selectFile(e.id,G.old):this.selectedOldFileStore.dispatch(void 0),t?this.selectFile(t.id,G.new):this.selectedNewFileStore.dispatch(void 0)}},{key:"onSelectOldFile",value:function(e){return this.selectedOldFileStore.subscribe((function(t){return e(t)}))}},{key:"onSelectFile",value:function(e,t){if(e===G.new)return this.onSelectNewFile(t);if(e===G.old)return this.onSelectOldFile(t);throw new Error("[comparison:SelectPDFFileService]Incorrect target: ".concat(e))}},{key:"getFileNameOfRecord",value:function(e,t){var n,o,r;return e.filename||(null===(n=e.doc)||void 0===n?void 0:n.getFileName())||(null===(r=e.doc)||void 0===r||null===(o=r.metadata)||void 0===o?void 0:o.Title)+".pdf"||0}}],[{key:"inject",value:function(){return{viewer:S,pdfui:f}}}]),e}(),ee=function(e){s(r,e);var n=p(r);function r(){var e;return t(this,r),J(c(e=n.apply(this,arguments)),"selectFileService",void 0),J(c(e),"allSelectableFiles",[]),e}return o(r,[{key:"mounted",value:function(){var e=this;q(l(r.prototype),"mounted",this).call(this),this.addDestroyHook(this.selectFileService.onFileListChange((function(t){e.allSelectableFiles=t,e.digest()})),this.selectFileService.onSelectFile(this.target,(function(t){if(!t)return e.fileListDropdown.unselect();var n=e.allSelectableFiles.indexOf(t),o=n>-1?e.fileListDropdown.childAt(n):void 0;o?e.fileListDropdown.select(o):e.fileListDropdown.unselect()})))}},{key:"onSelectFileRecord",value:function(e){this.selectFileService.selectFile(e.id,this.target)}},{key:"onSelectedLocalFile",value:function(e){this.selectFileService.addNewFileFile(e,e.name,this.target)}}],[{key:"getName",value:function(){return"select-pdf-file"}},{key:"inject",value:function(){return{selectFileService:Z}}},{key:"getMetadata",value:function(){return{options:{target:{type:"enum",enums:[G.new,G.old],required:!0}}}}}]),r}(v.createSuperClass({template:Y()()}));W.registerComponent(ee);var te=r(706),ne=r.n(te),oe=function(){function e(n,o){t(this,e),J(this,"from",void 0),J(this,"end",void 0),this.from=n,this.end=o}return o(e,[{key:"setFromPageNumber",value:function(e){return!(e>this.end)&&(this.from=e,!0)}},{key:"setToPageNumber",value:function(e){return!(e<this.from)&&(this.end=e,!0)}},{key:"toJSON",value:function(){return{from:this.from,end:this.end}}}]),e}(),re=function(){function e(){t(this,e),J(this,"oldFileRange",new oe(1,1)),J(this,"newFileRange",new oe(1,1))}return o(e,[{key:"setFromPageNumber",value:function(e,t){var n=this.getRange(e);return!(t>n.end)&&(n.setFromPageNumber(t),!0)}},{key:"setToPageNumber",value:function(e,t){var n=this.getRange(e);return!(t<n.from)&&(n.setToPageNumber(t),!0)}},{key:"getRangeData",value:function(e){return this.getRange(e).toJSON()}},{key:"getRange",value:function(e){if(e===G.new)return this.newFileRange;if(e===G.old)return this.oldFileRange;throw new Error("Incorrect file target： ".concat(e,", It must be one of The ['new', 'old']"))}}]),e}(),ie=function(e){s(r,e);var n=p(r);function r(){var e;return t(this,r),J(c(e=n.apply(this,arguments)),"rangeService",void 0),J(c(e),"selectFileService",void 0),J(c(e),"pageNumberList",[]),J(c(e),"fromDropdown",void 0),J(c(e),"toDropdown",void 0),e}return o(r,[{key:"init",value:function(){q(l(r.prototype),"init",this).call(this),this.label="comparison:select-pdf-file.".concat(this.target,"File")}},{key:"mounted",value:function(){var e=this;q(l(r.prototype),"mounted",this).call(this),this.addDestroyHook(this.selectFileService.onSelectFile(this.target,(function(t){if(!t)return e.resetRange();e.fromDropdown.enable(),e.toDropdown.enable(),t.doc?e.pageNumberList=Array(t.doc.getPageCount()).fill(0).map((function(e,t){return t+1})):e.pageNumberList=[],e.digest(),e.selectFromPageNumber(1),e.selectToPageNumber(e.pageNumberList.length||1)})))}},{key:"resetRange",value:function(){this.fromDropdown.disable(),this.fromDropdown.setText(""),this.toDropdown.disable(),this.toDropdown.setText("")}},{key:"selectFromPageNumber",value:function(e){var t=e-1;if(this.rangeService.setFromPageNumber(this.target,t)){if(this.fromDropdown){var n=this.fromDropdown.childAt(t);n&&this.fromDropdown.select(n)}}else this.getPDFUI().alert("comparison:select-pdf-file.rangeError")}},{key:"selectToPageNumber",value:function(e){var t=e-1;if(this.rangeService.setToPageNumber(this.target,t)){if(this.toDropdown){var n=this.toDropdown.childAt(t);n&&this.toDropdown.select(n)}}else this.getPDFUI().alert("comparison:select-pdf-file.rangeError")}}],[{key:"getName",value:function(){return"select-compare-range"}},{key:"getMetadata",value:function(){return{options:{target:{type:"enum",enums:["new","old"],required:!0}}}}},{key:"inject",value:function(){return{rangeService:re,selectFileService:Z}}}]),r}(v.createSuperClass({template:ne()()}));W.registerComponent(ie);var ae=r(331),se=r.n(ae),le=function(e){s(r,e);var n=p(r);function r(){var e;return t(this,r),J(c(e=n.apply(this,arguments)),"selectPDFFileService",void 0),J(c(e),"previewerContainer",void 0),J(c(e),"pageDropdown",void 0),J(c(e),"pageSlider",void 0),J(c(e),"pageNumbers",[]),J(c(e),"currentPageNumber",1),e}return o(r,[{key:"setFile",value:function(e){if(!e)return this.pageNumbers=[],this.currentPageNumber=1,this.pageDropdown.setMaxValue(0),this.previewerContainer.element.clear(),void this.digest();var t=e.doc.getPageCount();this.currentPageNumber>t&&(this.currentPageNumber=t),this.pageNumbers=Array(t).fill(0).map((function(e,t){return t+1})),this.pageDropdown.setMaxValue(t),this.digest(),this.previewPage(1)}},{key:"mounted",value:function(){var e=this;q(l(r.prototype),"mounted",this).call(this);this.addDestroyHook(this.selectPDFFileService.onSelectFile(this.target,(function(t){e.setFile(t)})))}},{key:"previewPage",value:function(e){var t=e-1,n=this.selectPDFFileService.getSelectedFileRecordByTarget(this.target);if(n){this.pageDropdown.select(this.pageDropdown.childAt(t)),this.pageDropdown.setEditValue(e),this.pageSlider.setValue(e);var o=this.previewerContainer.element,r=getComputedStyle(o),i=o.clientWidth-ce(r.paddingLeft)-ce(r.paddingRight)-ce(r.borderLeftWidth)-ce(r.borderRightWidth),a=o.clientHeight-ce(r.paddingTop)-ce(r.paddingBottom)-ce(r.borderTopWidth)-ce(r.borderBottomWidth);return n.doc.loadThumbnail({pageIndex:t,width:i,height:a,type:"image"}).then((function(e){o.clear(),o.appendChild(e)}))}}}],[{key:"getName",value:function(){return"selected-pdf-previewer"}},{key:"getMetadata",value:function(){return{options:{target:{type:"enum",enums:[G.old,G.new],required:!0}}}}},{key:"inject",value:function(){return{selectPDFFileService:Z}}}]),r}(v.createSuperClass({template:se()(),fragments:[{target:"fv--comparison-previewer-page-dropdown",config:{editOptions:{type:"number",min:1,step:1}}}]}));function ce(e){return parseFloat(e)||0}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){J(e,t,n[t])}))}return e}function pe(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}W.registerComponent(le);var de,fe="comparison",me=r(732),ve="comparison-default-options",ge=function(){function e(){t(this,e),J(this,"defaultOptions",void 0),J(this,"currentOptionsStore",void 0),J(this,"viewer",void 0),J(this,"storage",void 0),J(this,"initDefer",(0,me.createDeferred)())}return o(e,[{key:"allInjected",value:function(){var e=this;this.storage=this.viewer.getStorage(),this.defaultOptions=new me.ValueStore,this.currentOptionsStore=new me.ValueStore,this.defaultOptions.dispatch(m.getAddonInfoByName(fe).options["default-compare-options"]),this.storage.get(C.COMPARISON,ve).then((function(t){e.defaultOptions.dispatch(t||e.defaultOptions.getCurrentValue()),e.currentOptionsStore.dispatch(e.defaultOptions.getCurrentValue()),e.initDefer.resolve()}))}},{key:"waitFotInitialization",value:function(){return this.initDefer.promise}},{key:"saveAsDefaultOptions",value:function(e){this.defaultOptions.dispatch(e),this.storage.set(C.COMPARISON,ve,e)}},{key:"getDefaultOptions",value:function(){return this.copyCompareOptions(this.defaultOptions.getCurrentValue())}},{key:"onDefaultOptionsChange",value:function(e){return this.defaultOptions.subscribe((function(t){return e(t)}))}},{key:"updateCurrentOption",value:function(e){this.currentOptionsStore.dispatch(e)}},{key:"resetOptions",value:function(){this.currentOptionsStore.dispatch(this.currentOptionsStore.getCurrentValue())}},{key:"onUpdateCurrentOptions",value:function(e){return this.currentOptionsStore.subscribe((function(t){return e(t)}))}},{key:"getCurrentOptions",value:function(){return this.currentOptionsStore.getCurrentValue()}},{key:"copyCompareOptions",value:function(e){return pe(ue({},e),{markingColor:ue({},e.markingColor),opacity:ue({},e.opacity),lineThickness:ue({},e.lineThickness)})}}],[{key:"inject",value:function(){return{viewer:S}}}]),e}();!function(e){e.start="start",e.processing="processing",e.end="end",e.failed="failed"}(de||(de={}));var he=function(){function e(){t(this,e),J(this,"viewer",void 0),J(this,"selectPDFFileService",void 0),J(this,"compareOptionsService",void 0),J(this,"compareRangeService",void 0),J(this,"compareStatusStore",new P)}return o(e,[{key:"compare",value:function(e){var t=this;return M((function(){var n,o,r,i,a,s,l,c,u,p,d;return z(this,(function(f){switch(f.label){case 0:return be("Old file not selected!",n=t.selectPDFFileService.getSelectedFileRecordByTarget(G.old)),be("New file not selected!",o=t.selectPDFFileService.getSelectedFileRecordByTarget(G.new)),r=t.compareOptionsService.getCurrentOptions(),i=t.compareRangeService.getRangeData(G.old),a=t.compareRangeService.getRangeData(G.new),s=t.viewer.getBuiltInComparisonStringResource(),[4,t.viewer.loadBuiltinComparisonTemplates()];case 1:l=f.sent(),c=l.newTemplateId,u=l.oldTemplateId,f.label=2;case 2:return f.trys.push([2,4,,5]),[4,n.doc.compareWith(o.doc,{basePageRange:i,otherPageRange:a,stringResource:s,baseFileName:t.selectPDFFileService.getFileNameOfRecord(n,G.old),otherFileName:t.selectPDFFileService.getFileNameOfRecord(o,G.new),resultFileName:t.viewer.i18n.t("comparison:resultFileName")||"The result of comparison.pdf",newTemplateId:c,oldTemplateId:u,options:{textOnly:r.compareTextOnly,detectPage:r.detectPageDeletionsOrInserts,compareTable:r.compareTable,markingColor:r.markingColor,lineThickness:r.lineThickness,opacity:r.opacity}},(function(n){"function"==typeof e&&e(n);var o=de.processing;0===n&&(o=de.start),t.compareStatusStore.dispatch({rate:n,status:o})}))];case 3:return p=f.sent(),t.compareStatusStore.dispatch({status:de.end,doc:p}),[2,p];case 4:throw d=f.sent(),t.compareStatusStore.dispatch({error:d,status:de.failed}),d;case 5:return[2]}}))}))()}},{key:"onProgress",value:function(e){return this.compareStatusStore.subscribe((function(t){return e(t)}))}},{key:"hasPermission",value:function(e){if(!e)return!1;var t=e.getPermissionsSync();return t>=4294967292||4294967295===t}},{key:"checkPersmission",value:function(){var e=this.selectPDFFileService.getSelectedFileRecordByTarget(G.old);if(be("Old file not selected!",e),!this.hasPermission(e.doc))return!1;var t=this.selectPDFFileService.getSelectedFileRecordByTarget(G.new);return be("New file not selected!",t),!!this.hasPermission(t.doc)}}],[{key:"inject",value:function(){return{viewer:S,selectPDFFileService:Z,compareOptionsService:ge,compareRangeService:re}}}]),e}();function be(e,t){if(null==t)throw new Error(e)}var ye=function(e){s(r,e);var n=p(r);function r(){var e;return t(this,r),J(c(e=n.apply(this,arguments)),"viewer",void 0),J(c(e),"pdfui",void 0),J(c(e),"selectFileService",void 0),J(c(e),"compareService",void 0),J(c(e),"compareRangeService",void 0),J(c(e),"selectedBothFiles",!1),e}return o(r,[{key:"mounted",value:function(){var e=this;q(l(r.prototype),"mounted",this).call(this);var t=function(){var t=e.selectFileService.getSelectedFileRecordByTarget(G.new),n=e.selectFileService.getSelectedFileRecordByTarget(G.old);e.selectedBothFiles=!!t&&!!n&&t!==n,e.digest()};this.addDestroyHook(this.selectFileService.onSelectFile(G.new,t),this.selectFileService.onSelectFile(G.old,t),L(this.element,(function(t){e.hide()}),E))}},{key:"ok",value:function(){var e=this;return M((function(){var t,n,o,r,i,a,s,l,c;return z(this,(function(u){switch(u.label){case 0:return t=e.checkPageRange(),n=t.checkPassed,o=t.message,n?[4,e.getPDFUI().getCurrentPDFDoc()]:[2,e.getPDFUI().alert(o)];case 1:return r=u.sent(),e.compareService.checkPersmission()?(e.hide(),[4,e.pdfui.loading()]):[2,e.getPDFUI().alert("comparison:permissionError")];case 2:i=u.sent(),a=(null==r?void 0:r.docModified)||!1,u.label=3;case 3:return u.trys.push([3,,15,16]),[4,e.compareService.compare()];case 4:return[4,(s=u.sent()).getFile({})];case 5:return l=u.sent(),i.close(),a?[4,e.getPDFUI().$confirm({message:"comparison:openFileTips",level:"prompt",customBtns:[{id:"open",text:"comparison:open"},{id:"download",text:"ui_:toolbar:buttons:download"}]})]:[3,10];case 6:return"open"!==(c=u.sent())?[3,9]:[4,e.pdfui.close(void 0,void 0,{destroyCurrentDoc:!1})];case 7:return u.sent(),[4,e.pdfui.openPDFByFile(l)];case 8:u.sent(),u.label=9;case 9:return"download"===c&&I(l,s.info.fileName),[3,14];case 10:return r?[4,e.pdfui.close(void 0,void 0,{destroyCurrentDoc:!1})]:[3,12];case 11:u.sent(),u.label=12;case 12:return[4,e.pdfui.openPDFByFile(l)];case 13:u.sent(),u.label=14;case 14:return[3,16];case 15:return i.close(),[7];case 16:return[2]}}))}))()}},{key:"checkPageRange",value:function(){var e,t,n={checkPassed:!0,message:""},o=this.compareRangeService.getRangeData(G.old),r=this.compareRangeService.getRangeData(G.new),i=null===(e=this.selectFileService.getSelectedFileRecordByTarget(G.old))||void 0===e?void 0:e.doc,a=null===(t=this.selectFileService.getSelectedFileRecordByTarget(G.new))||void 0===t?void 0:t.doc,s=0===o.from&&o.end===i.info.pageCount-1,l=0===r.from&&r.end===a.info.pageCount-1;s&&l||o.end-o.from+1!==r.end-r.from+1&&(n={checkPassed:!1,message:"comparison:select-pdf-file.selectSameNumber"});return n}},{key:"transferFiles",value:function(){this.selectFileService.transferFiles()}},{key:"doShown",value:function(){q(l(r.prototype),"doShown",this).call(this),this.resetRange(),0!==this.element.offsetWidth&&(this.element.style.cssText+="\n            left: calc(50vw - ".concat(this.element.offsetWidth/2,"px);\n            top: calc(50vh - ").concat(this.element.offsetHeight/2,"px);\n        "))}},{key:"resetRange",value:function(){var e=this.selectFileService.getSelectedFileRecordByTarget(G.old);e&&this.selectFileService.selectFile(e.id,G.old)}},{key:"showOptionsDialog",value:function(){var e=this.getRoot().querySelectorAll("@comparison:options-dialog");if(0===e.length)throw new Error("Failed to open dialog: <comparison:options-dialog>, Please make sure the component is in the layout template.");if(e.length>1)throw new Error("Failed to open dialog: <comparison:options-dialog>， Please make sure there is only one in the layout template");e[0].show()}},{key:"keyupHandler",value:function(e){H(e,A)&&this.transferFiles()}}],[{key:"getName",value:function(){return"select-pdf-file-dialog"}},{key:"inject",value:function(){return{viewer:S,pdfui:f,selectFileService:Z,compareService:he,compareRangeService:re}}}]),r}(v.createSuperClass({template:X()()}));W.registerComponent(ye);var we=r(742),_e=r.n(we),ke=function(e){s(r,e);var n=p(r);function r(){var e;return t(this,r),J(c(e=n.apply(this,arguments)),"optionsService",void 0),J(c(e),"currentOptions",void 0),J(c(e),"saveAsDefault",!0),e}return o(r,[{key:"allInjected",value:function(){this.currentOptions=this.optionsService.copyCompareOptions(this.optionsService.getDefaultOptions())}},{key:"mounted",value:function(){var e=this;q(l(r.prototype),"mounted",this).call(this),this.addDestroyHook(this.optionsService.onUpdateCurrentOptions((function(t){e.currentOptions=e.optionsService.copyCompareOptions(t),e.digest()})),L(this.element,(function(t){e.hide()}),E))}},{key:"ok",value:function(){this.optionsService.updateCurrentOption(this.currentOptions),this.saveAsDefault&&this.optionsService.saveAsDefaultOptions(this.currentOptions),this.hide()}},{key:"doShown",value:function(){q(l(r.prototype),"doShown",this).call(this),this.optionsService.updateCurrentOption(this.optionsService.getDefaultOptions())}},{key:"cancel",value:function(){this.resetOptions(),this.hide()}},{key:"close",value:function(){this.cancel()}},{key:"resetOptions",value:function(){this.optionsService.resetOptions()}}],[{key:"getName",value:function(){return"options-dialog"}},{key:"inject",value:function(){return{optionsService:ge}}}]),r}(v.createSuperClass({template:_e()()}));W.pipe("color",(function(){return function(e){return"number"==typeof e?N.fromRGB(e):e&&"function"==typeof e.toRGB?e.toRGB():e}})),W.registerComponent(ke);var Se=function(e){s(r,e);var n=p(r);function r(){var e;return t(this,r),J(c(e=n.apply(this,arguments)),"selectFileService",void 0),e}return o(r,[{key:"handle",value:function(){var e=this.component.getRoot().querySelectorAll("@comparison:select-pdf-file-dialog");if(0===e.length)throw new Error("The `<comparison:select-pdf-file-dialog> ` should be added into your layout template");if(e.length>1)throw new Error("Found more than one of `<comparison:select-pdf-file-dialog>`. Please check if the component has been added repeatedly");e[0].show(),this.selectFileService.addCurrentOpeningFile(),this.selectFileService.unselectFile(G.new)}},{key:"mounted",value:function(){q(l(r.prototype),"mounted",this).call(this);var e,t=this.getPDFUI(),n=this,o=(e=M((function(){var e;return z(this,(function(o){switch(o.label){case 0:return[4,t.getCurrentPDFDoc()];case 1:return(e=o.sent())?(e.isDynamicXFA()?n.component.disable():n.component.enable(),[2]):[2]}}))})),function(){return e.apply(this,arguments)});this.addDestroyHook(t.addViewerEventListener(x.openFileSuccess,(function(){o()}))),o()}}],[{key:"getName",value:function(){return"ShowCompareFileDialogButtonController"}},{key:"inject",value:function(){return{selectFileService:Z,viewer:S}}}]),r}(b);function xe(){}W.registerController(Se),W.registerFragment("show-compare-dialog-button",{template:'\n        <ribbon-button\n                name="view-compare-button"\n                icon-class="fv__icon-comparison-compare"\n                class="fv__ui-toolbar-show-text-button"\n                @tooltip\n                tooltip-title="comparison:toolbar.compareBtnToolTip"\n                @controller="comparison:ShowCompareFileDialogButtonController"\n            >comparison:toolbar.compareBtnText</ribbon-button>\n    '}),W.registerPreConfiguredComponent("tab",{template:'\n        <gtab\n             name="comparison-tab"\n             group="toolbar-tab"\n             body="fv--comparison-tab-body"\n             text="comparison:toolbar.compareResultTabTitle"\n             visible="false"\n             @aria:toolbar.tab\n             @collab-unsupported\n             @hide-on-sr\n             @comparison:comparison-actions="show,active"\n        ></gtab>\n    '});var Ce,Fe={Text:1,Images:2,Annotation:3,Formatting:4,Everything:0},Oe={Annotation:!1,Formatting:!1,Images:!0,Text:!0,Everything:!1},De="open-compare-doc",Pe="filter-options-updated",Ne="show-hide-results",Ie="jumped-to-summary-page",Te="show-legend-layer",je="Everything";!function(e){e[e.PREV=-1]="PREV",e[e.NEXT=1]="NEXT"}(Ce||(Ce={}));var Re=function(e){s(r,e);var n=p(r);function r(){var e;return t(this,r),J(c(e=n.apply(this,arguments)),"pdfui",void 0),J(c(e),"viewer",void 0),J(c(e),"currentDoc",void 0),J(c(e),"currentPageIndex",void 0),J(c(e),"currentAnnotIndex",void 0),J(c(e),"subjects",new D),J(c(e),"filterOptions",Object.assign({},Oe)),J(c(e),"unmark",xe),J(c(e),"compareFilterNums",{Annotation:0,Formatting:0,Images:0,Text:0}),e}return o(r,[{key:"allInjected",value:function(){var e,t,n=this,o=this,r=(e=M((function(e){var t;return z(this,(function(n){switch(n.label){case 0:return o.currentPageIndex=void 0,o.currentAnnotIndex=void 0,e&&e.isCompareDoc()?[3,1]:(o.currentDoc=void 0,o.subjects.dispatch(De,!1),o.dispatchJumpChange(),o.toggleLegend(!1),[2]);case 1:return o.currentDoc=e,o.subjects.dispatch(Ne,!0),[4,e.getComparisonFilterCountSummary()];case 2:t=n.sent(),o.compareFilterNums=Object.assign({},t),o.updateFilterOptions(Object.assign({},Oe)),o.subjects.dispatch(De,!0),o.dispatchJumpChange(),o.toggleLegend(!0),o.setFilterCheckboxstatue(),n.label=3;case 3:return[2]}}))})),function(t){return e.apply(this,arguments)});this.pdfui.getCurrentPDFDoc().then((function(e){e&&r(e)})),this.addDestroyHook(this.pdfui.addViewerEventListener((J(t={},x.renderFileSuccess,(function(e){return r(e)})),J(t,x.willCloseDocument,(function(){n.currentDoc=void 0,n.unmark()})),J(t,x.layerVisibleChange,(function(e){var t=e.id,o=e.visible;for(var r in Fe)if(Fe[r]===Number(t)&&r!==je){n.filterOptions[r]=o,n.subjects.dispatch(Pe,n.filterOptions);break}})),J(t,x.pageNumberChange,(function(e){n.currentIsCompareDoc()&&n.subjects.dispatch(Ie,e<=2)})),J(t,x.zoomToSuccess,(function(){n.isShowMark()&&n.activeAnnot(!1)})),t)))}},{key:"toggleShowHideResult",value:function(){var e=this.isShowResult();this.subjects.dispatch(Ne,!e);var t=this.viewer.getPDFDocRender(),n=!this.isShowResult();return!!t&&(t.hideMarkup(n,!0),!n)}},{key:"isShowResult",value:function(){return this.subjects.getCurrentValue(Ne,!0)}},{key:"onShowHideChange",value:function(e){return this.subjects.subscribe(Ne,(function(t){return e(t)}))}},{key:"updateFilterOptions",value:function(e){if("boolean"==typeof e.Everything){if(e.Everything!==this.filterOptions.Everything)for(var t in this.filterOptions){var n=this.filterOptions[t]!==e.Everything;this.filterOptions[t]=e.Everything,n&&t!==je&&this.emitFilterOptionChange(t,this.filterOptions[t])}else for(var o in this.filterOptions)if(o!==je){var r=this.filterOptions[o]!==e[o];this.filterOptions[o]=e[o],r&&this.emitFilterOptionChange(o,this.filterOptions[o])}}else{for(var i in e){var a=this.filterOptions[i]!==e[i];this.filterOptions[i]=e[i],a&&this.emitFilterOptionChange(i,this.filterOptions[i])}var s=Object.entries(this.filterOptions).every((function(e){return e[0]===je||e[1]}));this.filterOptions.Everything=s}this.subjects.dispatch(Pe,this.filterOptions)}},{key:"emitFilterOptionChange",value:function(e,t){var n=Fe[e];this.pdfui.eventEmitter.emit(y.compareFilterChange,{id:n,checked:t})}},{key:"currentIsCompareDoc",value:function(){return!!this.currentDoc&&this.currentDoc.isCompareDoc()}},{key:"isFilterOptionOn",value:function(e){return this.filterOptions[e]}},{key:"onOpenCompareDoc",value:function(e){return this.subjects.subscribe(De,(function(t){return e(t)}))}},{key:"onFilterOptionsUpdated",value:function(e){return this.subjects.subscribe(Pe,(function(t){return e(t)}))}},{key:"onJumpedToSummaryPage",value:function(e){return this.subjects.subscribe(Ie,(function(t){return e(t)}))}},{key:"jumpToSummaryPage",value:function(){var e=this;return M((function(){return z(this,(function(t){switch(t.label){case 0:return e.currentIsCompareDoc()?[4,e.viewer.goToPage(0,0,0,!1)]:[2];case 1:return[2,t.sent()]}}))}))()}},{key:"isLegendVisible",value:function(){return this.subjects.getCurrentValue(Te,this.currentIsCompareDoc())}},{key:"toggleLegend",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.isLegendVisible(),t=this;return M((function(){var n,o;return z(this,(function(r){switch(r.label){case 0:return e?[4,t.pdfui.getRootComponent()]:[3,4];case 1:return n=r.sent(),[3,3];case 2:(o=r.sent()).querySelector("@comparison:legend-layer")||o.append("<comparison:legend-layer></comparison:legend-layer>"),r.label=3;case 3:n.querySelector("@comparison:legend-layer"),r.label=4;case 4:return t.subjects.dispatch(Te,e),[2]}}))}))()}},{key:"onShowLegend",value:function(e){return this.subjects.subscribe(Te,(function(t){return e(t)}))}},{key:"getCompareFilterNums",value:function(){return Object.assign({},this.compareFilterNums)}},{key:"hasNextChange",value:function(){var e=this;return M((function(){return z(this,(function(t){switch(t.label){case 0:return[4,e.getNextChangeOfDirection(e.currentPageIndex,e.currentAnnotIndex,1)];case 1:return[2,!!t.sent().annot]}}))}))()}},{key:"hasPreviousChange",value:function(){var e=this;return M((function(){return z(this,(function(t){switch(t.label){case 0:return[4,e.getNextChangeOfDirection(e.currentPageIndex,e.currentAnnotIndex,-1)];case 1:return[2,!!t.sent().annot]}}))}))()}},{key:"onJumpChanges",value:function(e){return this.subjects.subscribe("",(function(){return e()}))}},{key:"nextChange",value:function(){var e=this;return M((function(){var t,n,o;return z(this,(function(r){switch(r.label){case 0:return[4,e.getNextChangeOfDirection(e.currentPageIndex,e.currentAnnotIndex,1)];case 1:return t=r.sent(),n=t.currentPageIndex,o=t.currentAnnotIndex,t.annot?(e.currentPageIndex=n,e.currentAnnotIndex=o,e.dispatchJumpChange(),[4,e.activeAnnot()]):[2];case 2:return r.sent(),[2]}}))}))()}},{key:"previousChange",value:function(){var e=this;return M((function(){var t,n,o;return z(this,(function(r){switch(r.label){case 0:return[4,e.getNextChangeOfDirection(e.currentPageIndex,e.currentAnnotIndex,-1)];case 1:return t=r.sent(),n=t.currentPageIndex,o=t.currentAnnotIndex,t.annot?(e.currentPageIndex=n,e.currentAnnotIndex=o,e.dispatchJumpChange(),[4,e.activeAnnot()]):[2];case 2:return r.sent(),[2]}}))}))()}},{key:"dispatchJumpChange",value:function(){this.subjects.dispatch("")}},{key:"activeAnnot",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this;return M((function(){var n,o,r,i,a,s;return z(this,(function(l){switch(l.label){case 0:return[4,t.getAnnots(t.currentPageIndex)];case 1:return n=l.sent(),[4,t.getAnnots((t.currentPageIndex||0)+1)];case 2:return o=l.sent(),r=n[t.currentAnnotIndex||0],i=o[t.currentAnnotIndex||0],e?[4,t.jumpToAnnot(t.currentPageIndex,r)]:[3,4];case 3:l.sent(),l.label=4;case 4:return t.unmark(),a=t.markAnnot(t.currentPageIndex,r),s=t.markAnnot((t.currentPageIndex||0)+1,i),t.unmark=function(){a(),s(),t.unmark=xe},[2]}}))}))()}},{key:"markAnnot",value:function(e,t){if(!t)return xe;var n=this.viewer.getPDFDocRender().getAnnotRender(e,t.getObjectNumber());if(!n)return xe;var o=document.createElement("div");o.classList.add("fv__ui-comparison-changes-active");var r=n.getComponent().getBoundary(),i=t.getBorderColor(),a="";return-1!==i&&(a=N.fromRGB(i).toCSS_Hex()),o.style.cssText="\n            left: ".concat(r.left,"px;\n            top: ").concat(r.top,"px;\n            width: ").concat(r.width,"px;\n            height: ").concat(r.height,"px;\n            outline-color: ").concat(a,";\n        "),n.$page.append(o),function(){o.remove()}}},{key:"isShowMark",value:function(){return"number"==typeof this.currentPageIndex&&"number"==typeof this.currentAnnotIndex}},{key:"jumpToAnnot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,n=this;return M((function(){var o;return z(this,(function(r){switch(r.label){case 0:return t?(o=t.getRect(),[4,n.viewer.goToPage(e,{x:o.left,y:o.top},!0)]):[2];case 1:return r.sent(),[2]}}))}))()}},{key:"getNextChangeOfDirection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,o=this;return M((function(){var r,i,a,s,l,c,u;return z(this,(function(p){switch(p.label){case 0:if(!o.currentDoc)return[2,{currentPageIndex:e,currentAnnotIndex:t,annot:void 0}];if(r=e,i=t,a=0,s=o.currentDoc.getPageCount()-2,-1!==n)return[3,4];p.label=1;case 1:return r>=a?[4,o.getAnnots(r)]:[3,3];case 2:return 0!==(c=p.sent()).length&&0!==i?(i=Math.min(i-1,c.length-1),l=c[i],[3,3]):(r-=2,i=1/0,[3,1]);case 3:return[3,9];case 4:if(1!==n)return[3,8];p.label=5;case 5:return r<=s?[4,o.getAnnots(r)]:[3,7];case 6:if(0===(u=p.sent()).length)r+=2,i=-1;else{if(!((i+=1)>=u.length))return l=u[i],[3,7];r+=2,i=-1}return[3,5];case 7:return[3,9];case 8:throw new Error("Incorrect direction value: ".concat(n));case 9:return[2,{currentPageIndex:r,currentAnnotIndex:i,annot:l}]}}))}))()}},{key:"getAnnots",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this;return M((function(){return z(this,(function(n){switch(n.label){case 0:return t.currentDoc?[4,t.currentDoc.getPageByIndex(e)]:[2,[]];case 1:return[4,n.sent().getMarkupAnnots()];case 2:return[2,n.sent().filter((function(e){var n=e.info.typeNano;return t.isFilterOptionOn(n)})).sort((function(e,t){var n=e.getRect(),o=t.getRect();return n.top<o.top?1:-1}))]}}))}))()}},{key:"getTotalDiffCount",value:function(){var e=this;return Object.keys(this.compareFilterNums).reduce((function(t,n){return t+e.compareFilterNums[n]}),0)}},{key:"setFilterCheckboxstatue",value:function(){for(var e in this.subjects.dispatch(Pe,ue({},Oe)),this.options)e!==je&&this.setLayerStatus({id:Fe[e],checked:this.options[e]})}},{key:"setLayerStatus",value:function(e){e.id!==Fe[je]&&this.pdfui.eventEmitter.emit(y.compareFilterChange,e)}}],[{key:"inject",value:function(){return{pdfui:f,viewer:S}}}]),r}(O);W.registerController(function(e){s(r,e);var n=p(r);function r(){var e;return t(this,r),J(c(e=n.apply(this,arguments)),"compareDocHelperService",void 0),e}return o(r,[{key:"mounted",value:function(){var e=this;q(l(r.prototype),"mounted",this).call(this),this.addDestroyHook(this.compareDocHelperService.onOpenCompareDoc((function(){e.updateComponentStatus()})),this.compareDocHelperService.onJumpChanges((function(){e.updateComponentStatus()})),this.compareDocHelperService.onFilterOptionsUpdated((function(){e.updateComponentStatus()})))}},{key:"updateComponentStatus",value:function(){var e=this;this.compareDocHelperService.currentIsCompareDoc()?this.compareDocHelperService.hasPreviousChange().then((function(t){t?e.component.enable():e.component.disable()})):this.component.disable()}},{key:"handle",value:function(){return this.compareDocHelperService.previousChange()}}],[{key:"getName",value:function(){return"PreviousChangeController"}},{key:"inject",value:function(){return{compareDocHelperService:Re}}}]),r}(b)),W.registerPreConfiguredComponent("previous-change-button",{template:'\n        <ribbon-button\n            name="fv--comparison-previous-change-button"\n            icon-class="fv__icon-comparison-previous-change"\n            class="fv__ui-toolbar-show-text-button"\n            @tooltip\n            tooltip-title="comparison:toolbar.comparePreToolTip"\n            text="comparison:toolbar.comparePreText"\n            @controller="comparison:PreviousChangeController"\n        ></ribbon-button>\n    '}),W.registerController(function(e){s(r,e);var n=p(r);function r(){var e;return t(this,r),J(c(e=n.apply(this,arguments)),"compareDocHelperService",void 0),e}return o(r,[{key:"mounted",value:function(){var e=this;q(l(r.prototype),"mounted",this).call(this),this.addDestroyHook(this.compareDocHelperService.onOpenCompareDoc((function(){e.updateComponentStatus()})),this.compareDocHelperService.onJumpChanges((function(){e.updateComponentStatus()})),this.compareDocHelperService.onFilterOptionsUpdated((function(){e.updateComponentStatus()})))}},{key:"updateComponentStatus",value:function(){var e=this;this.compareDocHelperService.currentIsCompareDoc()?this.compareDocHelperService.hasNextChange().then((function(t){t?e.component.enable():e.component.disable()})):this.component.disable()}},{key:"handle",value:function(){this.compareDocHelperService.nextChange()}}],[{key:"getName",value:function(){return"NextChangeController"}},{key:"inject",value:function(){return{compareDocHelperService:Re}}}]),r}(b)),W.registerPreConfiguredComponent("next-change-button",{template:'\n        <ribbon-button\n            name="fv--comparison-next-change-button"\n            icon-class="fv__icon-comparison-next-change"\n            class="fv__ui-toolbar-show-text-button"\n            @tooltip\n            tooltip-title="comparison:toolbar.compareNextToolTip"\n            text="comparison:toolbar.compareNextText"\n            @controller="comparison:NextChangeController"\n        ></ribbon-button>\n    '});var He=function(e){s(r,e);var n=p(r);function r(){var e;return t(this,r),J(c(e=n.apply(this,arguments)),"compareDocHelperService",void 0),e}return o(r,[{key:"mounted",value:function(){var e=this;q(l(r.prototype),"mounted",this).call(this);var t=function(){var t=e.compareDocHelperService.getCompareFilterNums()[e.type]||0,n=e.localizer.translateSync({Text:"comparison:toolbar.filter.dropdown.text",Images:"comparison:toolbar.filter.dropdown.image",Annotation:"comparison:toolbar.filter.dropdown.annot",Formatting:"comparison:toolbar.filter.dropdown.format",Everything:"comparison:toolbar.filter.dropdown.everything"}[e.type],{count:t});e.setLabel(n)};this.addDestroyHook(this.compareDocHelperService.onFilterOptionsUpdated((function(t){e.checked=t[e.type],e.digest(!1)})),this.compareDocHelperService.onOpenCompareDoc((function(){t()})),this.watchI18n("",t))}},{key:"onInput",value:function(e){me.isSafari&&this.updateFilterOption(e)}},{key:"updateFilterOption",value:function(e){this.compareDocHelperService.updateFilterOptions(J({},this.type,e))}},{key:"handleKeyup",value:function(e){H(e,A)&&(this.checked=!e.target.checked,this.updateFilterOption(this.checked))}}],[{key:"getName",value:function(){return"filter-options-checkbox"}},{key:"getMetadata",value:function(){return{options:{checked:{type:"boolean"},type:{type:"enum",enums:["Annotation","Formatting","Images","Text","Everything"],required:!0},label:{type:"string"}}}}},{key:"inject",value:function(){return{compareDocHelperService:Re}}}]),r}(v.createSuperClass({template:'\n<form-group @var.self="$component" direction="rtl" class="fv__ui-comparison-filter-option">\n    <input type="checkbox" @model="self.checked" @on.input="self.onInput($component.getValue())" @on.change="self.updateFilterOption($component.getValue())" @on.native.keyup="self.handleKeyup($event)">\n</form-group>\n'}));W.registerComponent(He);var Ae=function(e){s(r,e);var n=p(r);function r(){var e;return t(this,r),J(c(e=n.apply(this,arguments)),"compareDocHelperService",void 0),e}return o(r,[{key:"mounted",value:function(){var e=this;q(l(r.prototype),"mounted",this).call(this),this.addDestroyHook(this.compareDocHelperService.onOpenCompareDoc((function(t){t&&(e.compareDocHelperService.getTotalDiffCount()>0?e.enable():e.disable())})))}},{key:"handle",value:function(){this.getDropdown().active()}}],[{key:"getName",value:function(){return"filter-dropdown"}},{key:"inject",value:function(){return{compareDocHelperService:Re}}}]),r}(v.createSuperClass({template:'\n    <ribbon-button\n        name="fv--comparison-filter-dropdown"\n        icon-class="fv__icon-comparison-filter"\n        text="comparison:toolbar.filter.title"\n        @tooltip\n        @on.click="$component.handle()"\n        tooltip-title="comparison:toolbar.filter.tooltip"\n    >\n        <dropdown separate="false">\n            <dropdown-item name="fv--comparison-filter-dropdown-item-text">\n                <comparison:filter-options-checkbox type="Text" label="comparison:toolbar.filter.dropdown.text"></comparison:filter-options-checkbox>\n            </dropdown-item>\n            <dropdown-item name="fv--comparison-filter-dropdown-item-image">\n                <comparison:filter-options-checkbox type="Images" label="comparison:toolbar.filter.dropdown.image"></comparison:filter-options-checkbox>\n            </dropdown-item>\n            <dropdown-item name="fv--comparison-filter-dropdown-item-annot">\n                <comparison:filter-options-checkbox type="Annotation" label="comparison:toolbar.filter.dropdown.annot"></comparison:filter-options-checkbox>\n            </dropdown-item>\n            <dropdown-item name="fv--comparison-filter-dropdown-item-format">\n                <comparison:filter-options-checkbox type="Formatting" label="comparison:toolbar.filter.dropdown.format"></comparison:filter-options-checkbox>\n            </dropdown-item>\n            <dropdown-item name="fv--comparison-filter-dropdown-item-everything">\n                <comparison:filter-options-checkbox type="Everything" label="comparison:toolbar.filter.dropdown.everything"></comparison:filter-options-checkbox>\n            </dropdown-item>\n        </dropdown>\n    </ribbon-button>\n    '}));W.registerComponent(Ae),W.registerController(function(e){s(r,e);var n=p(r);function r(){var e;return t(this,r),J(c(e=n.apply(this,arguments)),"compareDocHelperService",void 0),J(c(e),"isLegendVisible",!0),e}return o(r,[{key:"mounted",value:function(){var e=this;q(l(r.prototype),"mounted",this).call(this),this.addDestroyHook(this.compareDocHelperService.onShowLegend((function(t){e.isLegendVisible=t,e.digest()})))}},{key:"handle",value:function(){this.compareDocHelperService.toggleLegend()}}],[{key:"getName",value:function(){return"ShowHideColorLegendController"}},{key:"inject",value:function(){return{compareDocHelperService:Re}}}]),r}(b)),W.registerPreConfiguredComponent("show-hide-color-legend-button",{template:"\n        <xbutton\n            @controller=\"comparison:ShowHideColorLegendController as ctrl\"\n            @setter.text=\"'comparison:toolbar.show.dropdown.' + (ctrl.isLegendVisible ? 'hideColor' : 'showColor')\"\n        ></xbutton>\n    "}),W.registerController(function(e){s(r,e);var n=p(r);function r(){var e;return t(this,r),J(c(e=n.apply(this,arguments)),"compareDocHelperService",void 0),J(c(e),"showResult",!0),e}return o(r,[{key:"mounted",value:function(){var e=this;q(l(r.prototype),"mounted",this).call(this),this.addDestroyHook(this.compareDocHelperService.onShowHideChange((function(t){e.showResult=t,e.digest()})))}},{key:"handle",value:function(){this.compareDocHelperService.toggleShowHideResult()}}],[{key:"getName",value:function(){return"ShowHideResultsController"}},{key:"inject",value:function(){return{compareDocHelperService:Re}}}]),r}(b)),W.registerPreConfiguredComponent("show-hide-results-button",{template:"\n        <xbutton\n            @controller=\"comparison:ShowHideResultsController as ctrl\"\n            @setter.text=\"'comparison:toolbar.show.dropdown.' + (ctrl.showResult ? 'hideResult' : 'showResult')\"\n        ></xbutton>\n    "});var Ee=w.COMPONENT_EVENTS;W.registerController(function(e){s(r,e);var n=p(r);function r(){var e;return t(this,r),J(c(e=n.apply(this,arguments)),"compareDocHelperService",void 0),e}return o(r,[{key:"mounted",value:function(){var e=this;q(l(r.prototype),"mounted",this).call(this),this.component.parent.once(Ee.ACTIVE,(function(){e.getPDFUI().getPDFDocRender().then((function(t){0===t.getCurrentPageIndex()?e.component.disable():e.component.enable()}))})),this.addDestroyHook(this.compareDocHelperService.onJumpedToSummaryPage((function(t){t?e.component.disable():e.component.enable()})))}},{key:"handle",value:function(){return this.compareDocHelperService.jumpToSummaryPage()}}],[{key:"getName",value:function(){return"ShowSummaryController"}},{key:"inject",value:function(){return{compareDocHelperService:Re}}}]),r}(b)),W.registerPreConfiguredComponent("show-summary-button",{template:'\n        <xbutton @controller="comparison:ShowSummaryController" text="comparison:toolbar.show.dropdown.showSummary"></xbutton>\n    '}),W.registerPreConfiguredComponent("show-hide-compare-tool-dropdown",{template:'\n        <ribbon-button\n            icon-class="fv__icon-comparison-show"\n            name="fv--comparison-show-dropdown"\n            text="comparison:toolbar.show.title"\n            @tooltip\n            tooltip-title="comparison:toolbar.show.tooltip"\n        >\n        <dropdown>\n            <comparison:show-hide-results-button name="fv--comparison-show-hide-results"></comparison:show-hide-results-button>\n            <comparison:show-hide-color-legend-button name="fv--comparison-show-hide-color-legend" class="fv__ui-dropdown-separator"></comparison:show-hide-color-legend-button>\n            <comparison:show-summary-button name="fv--comparison-show-summary"></comparison:show-summary-button>\n        </dropdown>\n        </ribbon-button>\n    ',config:{target:"fv--comparison-show-dropdown",callback:function(){this.component.getDropdown().active()}}});var Be="";Be="@lazy",W.registerPreConfiguredComponent("tab-body",{template:'\n        <paddel name="fv--comparison-tab-body" visible="false" @aria:toolbar '.concat(Be,'>\n            <group-list>\n                <group>\n                    <comparison:previous-change-button></comparison:previous-change-button>\n                    <comparison:next-change-button></comparison:next-change-button>\n                    <comparison:filter-dropdown name="fv--comparison-filter-dropdown"></comparison:filter-dropdown>\n                    <comparison:show-hide-compare-tool-dropdown></comparison:show-hide-compare-tool-dropdown>\n                </group>\n            </group-list>\n        </paddel>\n    ')});var Le=r(983),Ve=r.n(Le),$e=function(e){s(r,e);var n=p(r);function r(){var e;return t(this,r),J(c(e=n.apply(this,arguments)),"compareDocHelperService",void 0),J(c(e),"optionService",void 0),J(c(e),"insertColor","#4db3ff"),J(c(e),"deleteColor","#fa4343"),J(c(e),"replaceColor","#ffd93f"),e}return o(r,[{key:"mounted",value:function(){var e=this;q(l(r.prototype),"mounted",this).call(this),this.addDestroyHook(this.compareDocHelperService.onShowLegend((function(t){t?e.show():e.hide()})),this.optionService.onUpdateCurrentOptions((function(t){e.insertColor=N.fromRGB(t.markingColor.insert).toCSS_Hex(),e.deleteColor=N.fromRGB(t.markingColor.delete).toCSS_Hex(),e.replaceColor=N.fromRGB(t.markingColor.replace).toCSS_Hex(),e.isVisible||e.digest()})))}},{key:"onShown",value:function(){q(l(r.prototype),"onShown",this).call(this),this.digest()}},{key:"onClickCloseBtn",value:function(){this.compareDocHelperService.toggleLegend(!1)}}],[{key:"getName",value:function(){return"legend-layer"}},{key:"inject",value:function(){return{compareDocHelperService:Re,optionService:ge}}}]),r}(v.createSuperClass({template:Ve()()}));W.registerComponent($e);var Ue=function(e){s(r,e);var n=p(r);function r(){var e;return t(this,r),J(c(e=n.apply(this,arguments)),"compareDocHelperService",void 0),e}return o(r,[{key:"init",value:function(e){q(l(r.prototype),"init",this).call(this,e);var t=this.attrValue.split(/[\s,]+/);this.addDestroyHook(this.compareDocHelperService.onOpenCompareDoc((function(n){n?t.forEach((function(t){"function"==typeof e[t]&&e[t].call(e)})):t.forEach((function(t){var n=function(e){return Me[e]}(t);n&&e[n].call(e)}))})))}}],[{key:"getName",value:function(){return"comparison-actions"}},{key:"inject",value:function(){return{compareDocHelperService:Re}}}]),r}(h);W.getRegistry().registerDirective(Ue);var Me={show:"hide",active:"deactive",disable:"enable",lock:"unlock"};Object.keys(Me).forEach((function(e){Me[Me[e]]=e}));var Je=function(e){s(r,e);var n=p(r);function r(){return t(this,r),n.apply(this,arguments)}return o(r,[{key:"init",value:function(e){this.pdfUI=e}},{key:"getComparePDFDocService",value:function(){return this.pdfUI.getServiceInstance(he)}},{key:"getSelectPDFFileService",value:function(){return this.pdfUI.getServiceInstance(Z)}},{key:"getCompareOptionsService",value:function(){return this.pdfUI.getServiceInstance(ge)}},{key:"getCompareRangeService",value:function(){return this.pdfUI.getServiceInstance(re)}},{key:"getCompareDocHelperService",value:function(){return this.pdfUI.getServiceInstance(Re)}}],[{key:"getName",value:function(){return fe}},{key:"getLoader",value:function(){return $()}}]),r}(m)})(),i=i.default})()));