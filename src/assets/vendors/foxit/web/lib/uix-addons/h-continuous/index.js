!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("UIExtension"),require("UIExtension").PDFViewCtrl):"function"==typeof define&&define.amd?define(["UIExtension",["UIExtension","PDFViewCtrl"]],t):"object"==typeof exports?exports.HContinuousViewModeAddon=t(require("UIExtension"),require("UIExtension").PDFViewCtrl):e.HContinuousViewModeAddon=t(e.UIExtension,e.UIExtension.PDFViewCtrl)}(self,((e,t)=>(()=>{var n={469:e=>{e.exports=null},616:t=>{"use strict";t.exports=e},290:e=>{"use strict";e.exports=t}},o={};function r(e){var t=o[e];if(void 0!==t)return t.exports;var i=o[e]={exports:{}};return n[e](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var i={};return(()=>{"use strict";function e(t,n){return null!=n&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?!!n[Symbol.hasInstance](t):e(t,n)}function t(t,n){if(!e(t,n))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function o(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}function u(e,t,n){return u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n||e):r.value}},u(e,t,n||e)}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return!t||"object"!=((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)&&"function"!=typeof t?l(e):t;var n}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=a(e);if(t){var r=a(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return d(this,n)}}r.d(i,{default:()=>V});var g=r(616),h=r(469),p=r.n(h),v=r(290),m=function(e){c(o,e);var n=f(o);function o(){return t(this,o),n.apply(this,arguments)}return o}(v.viewMode.UsualViewModeShortcutHandler),w=v.ViewerEvents,y=v.vendors.jQuery,b=v.commons.debounce,P=function(e){c(r,e);var n=f(r);function r(e){var o;return t(this,r),(o=n.call(this,e)).diffHCache=null,o.pdfViewer=e.pdfViewer,o._rotateCallback=o._rotateCallback.bind(l(o)),o.scrollCurrentPageIntoView_debounced=b((function(){o.scrollCurrentPageIntoView()}),20),o}return o(r,[{key:"getJQItems",value:function(){return y(u(a(r.prototype),"getItems",this).call(this))}},{key:"into",value:function(e,t){var n=this;u(a(r.prototype),"into",this).call(this,e,t),this.pdfViewer.element.classList.add("fv__h-continuous-view-mode-layout");var o=this.constructor.getName(),i=["<style>","."+o+"{","white-space:nowrap;","height:100%;","display: flex;","align-items: center","}","."+o+":before{",'content:"";',"display:inline-block;","height:100%;","vertical-align: middle;","}","."+o+" .fv__pdf-view-mode-item{","margin-left:10px;","display:inline-block;","vertical-align: middle;","align-self: stretch;","display: flex;","align-items: center;","}","."+o+" .fv__pdf-view-mode-item .fv__pdf-page-not-rendered{","width: 50vw;","}","."+o+" .fv__pdf-page-layout.fv__rendering{","min-width:128px;","}","."+o+" .fv__pdf-view-mode-item:first-child{","margin-left:10px;","}","</style>"].join("");this.$style=y(i),this.docRender.$container.after(this.$style),this.docRender.$container.addClass(this.constructor.getName()),this.docRender.$ui.parents(".fv__ui-pdfviewer").css({"overflow-y":"unset","overflow-x":"scroll"}),this.pdfViewer.eventEmitter.on(w.pageRotationChange,this.rotateCallback=function(e,t,o){var r=n.pdfViewer.getPDFPageRender(e.getIndex());n._rotateCallback(r,t)}),this.pdfViewer.eventEmitter.on(w.pagesRotated,this.rotatePagesCallback=function(e,t,o){e.forEach((function(e,t){n.rotateCallback(e,newRotation,oldRotations[t])}))});var s=this.docRender.viewerRender.scrollWrap;this._unwatchScrollEvent=s.addScrollEventListener((function(){clearTimeout(n.scrollEventTimer);var e=n.getCurrentPageIndex();n.scrollEventTimer=setTimeout((function(){var t=n.docRender.pagesRender;t&&t.renderVisiblePages().then((function(){var t=n.getCurrentPageIndex();t!==e&&n.docRender.setCurrentPageIndex(t)}),(function(){}))}),30)})),this.onPageNumberChange=function(){n.scrollCurrentPageIntoView_debounced()},this.unobservePageNumberChangeEvent=this.pdfViewer.addEventListener(w.pageNumberChange,this.onPageNumberChange)}},{key:"renderViewMode",value:function(e,t,n,o,r){}},{key:"jumpToPage",value:function(e,t){var n=t.x,o=void 0===n?0:n,r=t.y,i=void 0===r?0:r,a=this.getJQItems();e>=a.length?e=a.length-1:e<0&&(e=0);var u=a[e],s=u.offsetLeft+o,c=u.firstElementChild.offsetTop+i;this.docRender.viewerRender.scrollWrap.scrollTo(s,c),this.docRender.viewerRender.scrollWrap.disabled||this.scrollCurrentPageIntoView_debounced()}},{key:"_rotateCallback",value:function(e,t){var n=e.getShowWidth(),o=e.getShowHeight();this.getJQItems().eq(e.index);if(t%2!=0){var r=n;n=o,o=r}this.docRender.pagesRender.$ui.height()}},{key:"getCurrentPageIndex",value:function(){var e,t=this.getJQItems(),n=this.docRender.viewerRender.scrollWrap.getScrollHost();e=n===window?{x:0,y:0,right:window.innerWidth,height:window.innerHeight}:n.getBoundingClientRect();for(var o=0,r=0,i=0,a=0;a<t.length;a++){var u=t[a].getBoundingClientRect(),s=R(e,u);if(s&&0==i&&(i=1),s>o&&(o=s,r=a),!s&&1==i){i=2;break}}return r}},{key:"getFitHeight",value:function(e){var t=this.docRender.viewerRender.scrollWrap;return t.getHeight()-t.getScrollOffsetTop()}},{key:"getFitWidth",value:function(e){return this.docRender.viewerRender.scrollWrap.getScrollHost().clientWidth}},{key:"getNextPageIndex",value:function(){var e=this.docRender.doc.getPageCount(),t=this.getCurrentPageIndex();return t<e-1&&t++,t}},{key:"getPrevPageIndex",value:function(){var e=this.getCurrentPageIndex();return e>0&&e--,e}},{key:"out",value:function(){this.pdfViewer.element.classList.remove("fv__h-continuous-view-mode-layout"),this._unwatchScrollEvent&&this._unwatchScrollEvent(),this.docRender.$container.removeClass(this.constructor.getName()),this.docRender.$ui.parents(".fv__ui-pdfviewer").css({"overflow-x":"","overflow-y":""}),this.pdfViewer.eventEmitter.off(w.pageRotationChange,this.rotateCallback),this.pdfViewer.eventEmitter.off(w.pagesRotated,this.rotatePagesCallback),this.docRender.pagesRender.$ui.css({paddingTop:"",paddingBottom:""}),this.unobservePageNumberChangeEvent(),this.$style&&this.$style.remove();for(var e=this.getJQItems(),t=0;t<e.length;t++)e.eq(t).css({paddingTop:"",paddingBottom:"",marginTop:"",marginBottom:"",paddingLeft:"",paddingRight:"",marginLeft:"",marginRight:""})}},{key:"generateShortcutEventHandler",value:function(){return new m(this)}},{key:"scrollCurrentPageIntoView",value:function(){if(this.docRender){var e=this.docRender.getCurrentPageIndex(),t=this.docRender.getPDFPageRender(e);t&&!t.pageAreaIsVisible&&t.$ui.get(0).scrollIntoViewIfNeeded(!0)}}}],[{key:"getName",value:function(){return"h-continuous-view-mode"}}]),r}(v.IViewMode),R=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=Math.max(e.left,t.left),r=Math[n?"min":"max"](e.top,t.top),i=Math[n?"max":"min"](e.bottom,t.bottom),a=Math.min(e.right,t.right);if(o<=a)if(n){if(r>=i)return(a-o)*(r-i)}else if(r<=i)return(a-o)*(i-r);return 0},C=g.shared.replaceRibbonButton2XButton,x=(g.Controller,g.PDFViewCtrl.Events),V=function(e){c(r,e);var n=f(r);function r(){return t(this,r),n.apply(this,arguments)}return o(r,[{key:"init",value:function(e,t){u(a(r.prototype),"init",this).call(this,e,t),t.getViewModeManager().register(P)}}],[{key:"getName",value:function(){return"h-continuous"}},{key:"getLoader",value:function(){return p()}},{key:"initOnLoad",value:function(){var e=g.modular.module("h-continuous",[]);e.registerController(function(e){c(r,e);var n=f(r);function r(e){return t(this,r),n.call(this,e,P.getName())}return o(r,[{key:"mounted",value:function(){var e=this,t=this.getPDFUI(),n=t.addViewerEventListener(x.openFileSuccess,(function(n){var o=n.getPageCount();e.getPDFUI().getPDFViewerRender().then((function(n){var r=n.getViewMode().getName();o<2||e.portfolioService.isDocumentClosed()||t.pdfViewer.currentPDFDoc.isPortfolio()&&"cover"!==e.portfolioLayoutService.getLayoutMode()?e.component.disable():(e.component.enable(),r===e.viewModeName&&e.component.active())}))}));this.addDestroyHook(n),this.addDestroyHook(t.addViewerEventListener(x.pageAdded,(function(){t.getPDFViewerRender().then((function(t){t.pdfDocRender.getPDFDoc().getPageCount()<2?e.component.disable():e.component.enable()}))}))),this.addDestroyHook(t.addViewerEventListener(x.insertPages,(function(){t.getPDFViewerRender().then((function(t){t.pdfDocRender.getPDFDoc().getPageCount()<2?e.component.disable():e.component.enable()}))}))),this.addDestroyHook(t.addViewerEventListener(x.pageRemoved,(function(){t.getPDFViewerRender().then((function(t){t.pdfDocRender.getPDFDoc().getPageCount()<2?e.component.disable():e.component.enable()}))}))),this.addDestroyHook(t.addViewerEventListener(x.pagesRemoved,(function(){t.getPDFViewerRender().then((function(t){t.pdfDocRender.getPDFDoc().getPageCount()<2?e.component.disable():e.component.enable()}))}))),u(a(r.prototype),"mounted",this).call(this)}}],[{key:"getName",value:function(){return"HContinuousViewModeController"}}]),r}(g.controllers.ViewModeController));var n={template:'\n            <ribbon-button small="true" @tooltip tooltip-title="h-continuous:buttons.title" @controller="h-continuous:HContinuousViewModeController" name="h-continuous-button" icon-class="fv__icon-toolbar-h-continuous-page" @aria:label="h-continuous:buttons.title">h-continuous:buttons.title</ribbon-button>\n            '};e.registerPreConfiguredComponent("h-continuous-ribbon-button",n),e.registerPreConfiguredComponent("h-continuous-button",Object.assign({},n,{template:C(n.template)}))}}]),r}(g.UIXAddon)})(),i=i.default})()));