!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("UIExtension"),require("UIExtension").PDFViewCtrl.commons):"function"==typeof define&&define.amd?define(["UIExtension",["UIExtension","PDFViewCtrl","commons"]],t):"object"==typeof exports?exports.PrintUIXAddon=t(require("UIExtension"),require("UIExtension").PDFViewCtrl.commons):e.PrintUIXAddon=t(e.UIExtension,e.UIExtension.PDFViewCtrl.commons)}(self,((e,t)=>(()=>{var n={625:(e,t,n)=>{n(779);e.exports=function(e){"use strict";e=e||{};var t="";return t+='<layer name="print-dialog" class="fv__ui-print-layer center websdk-modal" append-to="body" @draggable backdrop>\n<layer-header title="print:dialog.printDialog.title"></layer-header>\n<div class="fv__ui-print-dialog" @stop-drag>\n<div class="fv__ui-print-dialog-body">\n<div class="fv__ui-print-item-title" data-i18n="print:dialog.printDialog.range"></div>\n<div class="fv__ui-print-item" name="range-item">\n',t+='\n<div class="fv__ui-print-range">\n<label><input name="print-range" type="radio" value="all" @aria:labelledby="::nextSiblings()"/><span data-i18n="print:dialog.printDialog.all"></span></label>\n</div>\n<div class="fv__ui-print-range">\n<label><input name="print-range" type="radio" value="current" @aria:labelledby="::nextSiblings()"/><span data-i18n="print:dialog.printDialog.current"></span></label>\n</div>\n<div class="fv__ui-print-range fv__ui-force-hide">\n<label>\n<input name="print-range" type="radio" value="fromTo" @aria:labelledby="::nextSiblings()" @aria:describedby="::nextSiblings()::nextSiblings()::nextSiblings()"/>\n<span data-i18n="print:dialog.printDialog.from"></span>\n<input class="print-common-input" type="number" min="1" name="range-from" />\n<span data-i18n="print:dialog.printDialog.to"></span>\n<input class="print-common-input" type="number" name="range-to"/>\n</label>\n</div>\n<div class="fv__ui-print-range" name="print-pages-field-container">\n<label>\n<input name="print-range" type="radio" value="assign" @aria:labelledby="::nextSiblings()" @aria:describedby="::nextSiblings()::nextSiblings()::nextSiblings()"/>\n<span data-i18n="print:dialog.printDialog.assign"></span>\n<input class="print-common-input" type="text" name="range-assign"/>\n<span>1,2,5-8</span>\n</label>\n</div>\n<div class="fv__ui-print-comments">\n<label><input name="reverse-pages" type="checkbox" value="" @aria:labelledby="::nextSiblings()"/><span data-i18n="print:dialog.printDialog.reversePages"></span></label>\n</div>\n</div>\n<div class="fv__ui-print-item-title fv__print-what-title" data-i18n="print:dialog.printDialog.printWhat"></div>\n<div class="fv__ui-print-item fv__print-what-item">\n\n<div class="fv__ui-print-comments">\n<select class="w_200 h_25" name="print-what" style=\'border: 1px solid #dddddd;\'>\n<option data-i18n="print:dialog.printDialog.doc" value="0"></option>\n<option data-i18n="print:dialog.printDialog.docMark" value="1"></option>\n<option data-i18n="print:dialog.printDialog.docStamps" value="2"></option>\n<option data-i18n="print:dialog.printDialog.formOnly" value="3"></option>\n</select>\n<label style=\'display: none\'>\n<input name="print-comments" type="checkbox" value="" @aria:labelledby="::nextSiblings()"/>\n<span data-i18n="print:dialog.printDialog.printComments"></span>\n</label>\n</div>\n</div>\n<div style=\'display: none\' class="fv__ui-print-item-title fv__print-more-options-title" data-i18n="print:dialog.printDialog.moreOptions"></div>\n<div style=\'display: none\' class="fv__ui-print-item fv__print-more-options-item">\n<div style=\'display: none\' class="fv__ui-print-more-options fv__print-quality-container" name="fv--print-page-size-container">\n<div class="fv__ui-print-item-title-sub" data-i18n="print:dialog.printDialog.quality"></div>\n<slider class="fv__print-quality" unit=\'%\' max="1000" min="100" step="1" value="100"\nname="print-dropdown-quality" @stop-drag></slider>\n</div>\n<div style=\'display: none\' class="fv__ui-quality-alert" data-i18n="print:dialog.printDialog.alert"></div>\n<div style=\'display: none\' name="fv--print-header-footer-container" class="fv__ui-print-more-options">\n<label style=\'display: none\'>\n<input name="fv--print-hide-header-footer" type="checkbox">\n<span data-i18n="print:dialog.printDialog.headerAndFooter"></span>\n</label>\n<label>\n<input name="bleed-marks" type="checkbox">\n<span data-i18n="print:dialog.printDialog.bleedMarks"></span>\n</label>\n</div>\n</div>\n</div>\n<div class="fv__ui-print-dialog-footer">\n<div class="fv__ui-print-dialog-btns">\n<button class="fv__ui-print-btn fv__ui-print-dialog-ok" data-i18n="print:dialog.ok" name="print-dialog-ok-btn"></button>\n<button class="fv__ui-print-btn fv__ui-print-dialog-cancel" data-i18n="print:dialog.cancel" name="print-dialog-close-btn"></button>\n</div>\n</div>\n</div>\n<div class="loading">\n<div>\n<span class="icon" data-i18n=\'sidebar.commentlist.search.loading\'></span>\n</div>\n</div>\n</layer>'}},383:e=>{e.exports=null},973:e=>{window,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){e.exports=n(2)},function(e,t,n){},function(e,t,n){"use strict";n.r(t),n(1);var r={isFirefox:function(){return"undefined"!=typeof InstallTrigger},getFirefoxMajorVersion:function(e){var t=(e=e||navigator.userAgent).toLowerCase().match(/firefox\/(\S+)/);if(t)return t[1].split(".").map((function(e){return parseInt(e)}))[0]},isIE:function(){return-1!==navigator.userAgent.indexOf("MSIE")||!!document.documentMode},isEdge:function(){return!r.isIE()&&!!window.StyleMedia},isChrome:function(){return!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:window).chrome},isSafari:function(){return Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||-1!==navigator.userAgent.toLowerCase().indexOf("safari")},isIOSChrome:function(){return-1!==navigator.userAgent.toLowerCase().indexOf("crios")}},i=r,o={show:function(e){var t=document.createElement("div");t.setAttribute("style","font-family:sans-serif; display:table; text-align:center; font-weight:300; font-size:30px; left:0; top:0;position:fixed; z-index: 9990;color: #0460B5; width: 100%; height: 100%; background-color:rgba(255,255,255,.9);transition: opacity .3s ease;"),t.setAttribute("id","printJS-Modal");var n=document.createElement("div");n.setAttribute("style","display:table-cell; vertical-align:middle; padding-bottom:100px;");var r=document.createElement("div");r.setAttribute("class","printClose"),r.setAttribute("id","printClose"),n.appendChild(r);var i=document.createElement("span");i.setAttribute("class","printSpinner"),n.appendChild(i);var a=document.createTextNode(e.modalMessage);n.appendChild(a),t.appendChild(n),document.getElementsByTagName("body")[0].appendChild(t),document.getElementById("printClose").addEventListener("click",(function(){o.close()}))},close:function(){var e=document.getElementById("printJS-Modal");e&&e.parentNode.removeChild(e)}},a=o;function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e){return e.charAt(0).toUpperCase()+e.slice(1)}function d(e,t){for(var n=0;n<e.length;n++)if("object"===l(t)&&-1!==t.indexOf(e[n]))return!0;return!1}function u(e,t){var n=document.createElement("div");if(f(t.header))n.innerHTML=t.header;else{var r=document.createElement("h1"),i=document.createTextNode(t.header);r.appendChild(i),r.setAttribute("style",t.headerStyle),n.appendChild(r)}e.insertBefore(n,e.childNodes[0])}function c(e,t){var n=document.createElement("div");if(f(t.footer))n.innerHTML=t.footer;else{var r=document.createElement("h1"),i=document.createTextNode(t.footer);r.appendChild(i),r.setAttribute("style",t.footerStyle),n.appendChild(r)}e.insertBefore(n,e.childNodes.lastChild)}function p(e){e.showModal&&a.close(),e.onLoadingEnd&&e.onLoadingEnd(),(e.showModal||e.onLoadingStart)&&window.URL.revokeObjectURL(e.printable);var t="mouseover";(i.isChrome()||i.isFirefox())&&(t="focus"),window.addEventListener(t,(function n(){window.removeEventListener(t,n),e.onPrintDialogClose();var r=document.getElementById(e.frameId);r&&(e.frameRemoveDelay?setTimeout((function(){r.remove()}),e.frameRemoveDelay):r.remove())}))}function f(e){return new RegExp("<([A-Za-z][A-Za-z0-9]*)\\b[^>]*>(.*?)</\\1>").test(e)}function g(e,t){try{if(i.isEdge()||i.isIE())try{e.focus(),e.contentWindow.document.execCommand("print",!1,null),p(t)}catch(n){setTimeout((function(){e.focus(),e.contentWindow.print(),p(t)}),1e3)}else setTimeout((function(){e.focus(),e.contentWindow.print(),p(t)}),1e3)}catch(e){t.onError(e)}finally{i.isFirefox()&&i.getFirefoxMajorVersion()<110&&(e.style.visibility="hidden",e.style.left="-1px")}}var m={send:function(e,t){document.getElementsByTagName("body")[0].appendChild(t);var n=document.getElementById(e.frameId);n.onload=function(){if("pdf"!==e.type){var t=n.contentWindow||n.contentDocument;if(t.document&&(t=t.document),t.body.appendChild(e.printableElement),"pdf"!==e.type&&e.style){var r=document.createElement("style");r.innerHTML=e.style,t.head.appendChild(r)}var o=t.getElementsByTagName("img");o.length>0?function(e){var t=e.map((function(e){if(e.src&&e.src!==window.location.href)return function(e){return new Promise((function(t){!function n(){e&&void 0!==e.naturalWidth&&0!==e.naturalWidth&&e.complete?t():setTimeout(n,500)}()}))}(e)}));return Promise.all(t)}(Array.from(o)).then((function(){return g(n,e)})):g(n,e)}else i.isFirefox()&&i.getFirefoxMajorVersion()<110||i.isSafari()?setTimeout((function(){return g(n,e)}),1e3):g(n,e)}}},v=function(e,t){if(e.base64){-1!==e.printable.indexOf(",")&&(e.printable=e.printable.split(",")[1]);var n=Uint8Array.from(atob(e.printable),(function(e){return e.charCodeAt(0)}));h(e,t,n)}else{e.printable=/^(blob|http|\/\/)/i.test(e.printable)?e.printable:window.location.origin+("/"!==e.printable.charAt(0)?"/"+e.printable:e.printable);var r=new window.XMLHttpRequest;r.responseType="arraybuffer",r.addEventListener("error",(function(){p(e),e.onError(r.statusText,r)})),r.addEventListener("load",(function(){if(-1===[200,201].indexOf(r.status))return p(e),void e.onError(r.statusText,r);h(e,t,r.response)})),r.open("GET",e.printable,!0),r.send()}};function h(e,t,n){var r=new window.Blob([n],{type:"application/pdf"});r=window.URL.createObjectURL(r),t.setAttribute("src",r),m.send(e,t)}function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}var y=function(e,t){var n,r="object"===b(n=e.printable)&&n&&(n instanceof HTMLElement||1===n.nodeType)?e.printable:document.getElementById(e.printable);r?(e.printableElement=w(r,e),e.header&&u(e.printableElement,e),e.footer&&c(e.printableElement,e),m.send(e,t)):window.console.error("Invalid HTML element id: "+e.printable)};function w(e,t){for(var n=e.cloneNode(),r=Array.prototype.slice.call(e.childNodes),i=0;i<r.length;i++)if(-1===t.ignoreElements.indexOf(r[i].id)){var o=w(r[i],t);n.appendChild(o)}switch(t.scanStyles&&1===e.nodeType&&n.setAttribute("style",function(e,t){for(var n="",r=(document.defaultView||window).getComputedStyle(e,""),i=0;i<r.length;i++)(-1!==t.targetStyles.indexOf("*")||-1!==t.targetStyle.indexOf(r[i])||d(t.targetStyles,r[i]))&&r.getPropertyValue(r[i])&&(n+=r[i]+":"+r.getPropertyValue(r[i])+";");return n+"max-width: "+t.maxWidth+"px !important; font-size: "+t.font_size+" !important;"}(e,t)),e.tagName){case"SELECT":n.value=e.value;break;case"CANVAS":n.getContext("2d").drawImage(e,0,0)}return n}var P=function(e,t){e.printableElement=document.createElement("div"),e.printableElement.setAttribute("style","width:100%"),e.printableElement.innerHTML=e.printable,e.header&&u(e.printableElement,e),e.footer&&c(e.printableElement,e),m.send(e,t)},x=function(e,t){e.printable.constructor!==Array&&(e.printable=[e.printable]),e.printableElement=document.createElement("div"),e.printable.forEach((function(t){var n=document.createElement("img");if(n.setAttribute("style",e.imageStyle),n.src=t,i.isFirefox()){var r=n.src;n.src=r}var o=document.createElement("div");o.appendChild(n),e.printableElement.appendChild(o)})),e.header&&u(e.printableElement,e),e.footer&&c(e.printableElement,e),m.send(e,t)};function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}var S=function(e,t){if("object"!==_(e.printable))throw new Error("Invalid javascript data object (JSON).");if("boolean"!=typeof e.repeatTableHeader)throw new Error("Invalid value for repeatTableHeader attribute (JSON).");if(!e.properties||!Array.isArray(e.properties))throw new Error("Invalid properties array for your JSON data.");e.properties=e.properties.map((function(t){return{field:"object"===_(t)?t.field:t,displayName:"object"===_(t)?t.displayName:t,columnSize:"object"===_(t)&&t.columnSize?t.columnSize+";":100/e.properties.length+"%;"}})),e.printableElement=document.createElement("div"),e.header&&u(e.printableElement,e),e.printableElement.innerHTML+=function(e){var t=e.printable,n=e.properties,r='<table style="border-collapse: collapse; width: 100%;">';e.repeatTableHeader&&(r+="<thead>"),r+="<tr>";for(var i=0;i<n.length;i++)r+='<th style="width:'+n[i].columnSize+";"+e.gridHeaderStyle+'">'+s(n[i].displayName)+"</th>";r+="</tr>",e.repeatTableHeader&&(r+="</thead>"),r+="<tbody>";for(var o=0;o<t.length;o++){r+="<tr>";for(var a=0;a<n.length;a++){var l=t[o],d=n[a].field.split(".");if(d.length>1)for(var u=0;u<d.length;u++)l=l[d[u]];else l=l[n[a].field];r+='<td style="width:'+n[a].columnSize+e.gridStyle+'">'+l+"</td>"}r+="</tr>"}return r+"</tbody></table>"}(e),e.footer&&c(e.printableElement,e),m.send(e,t)};function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}var C=["pdf","html","image","json","raw-html"],k=function(){var e={printable:null,fallbackPrintable:null,type:"pdf",header:null,headerStyle:"font-weight: 300;",footer:null,footerStyle:"font-weight: 300;",maxWidth:800,properties:null,gridHeaderStyle:"font-weight: bold; padding: 5px; border: 1px solid #dddddd;",gridStyle:"border: 1px solid lightgray; margin-bottom: -1px;",showModal:!1,onError:function(e){throw e},onLoadingStart:null,onLoadingEnd:null,onPrintDialogClose:function(){},onIncompatibleBrowser:function(){},modalMessage:"Retrieving Document...",frameId:"printJS",frameRemoveDelay:null,printableElement:null,documentTitle:"Document",targetStyle:["clear","display","width","min-width","height","min-height","max-height"],targetStyles:["border","box","break","text-decoration"],ignoreElements:[],repeatTableHeader:!0,css:null,style:null,scanStyles:!0,base64:!1,onPdfOpen:null,font:"TimesNewRoman",font_size:"12pt",honorMarginPadding:!0,honorColor:!1,imageStyle:"max-width: 100%;"},t=arguments[0];if(void 0===t)throw new Error("printJS expects at least 1 attribute.");switch(E(t)){case"string":e.printable=encodeURI(t),e.fallbackPrintable=e.printable,e.type=arguments[1]||e.type;break;case"object":for(var n in e.printable=t.printable,e.fallbackPrintable=void 0!==t.fallbackPrintable?t.fallbackPrintable:e.printable,e.fallbackPrintable=e.base64?"data:application/pdf;base64,".concat(e.fallbackPrintable):e.fallbackPrintable,e)"printable"!==n&&"fallbackPrintable"!==n&&(e[n]=void 0!==t[n]?t[n]:e[n]);break;default:throw new Error('Unexpected argument type! Expected "string" or "object", got '+E(t))}if(!e.printable)throw new Error("Missing printable information.");if(!e.type||"string"!=typeof e.type||-1===C.indexOf(e.type.toLowerCase()))throw new Error("Invalid print type. Available types are: pdf, html, image and json.");e.showModal&&a.show(e),e.onLoadingStart&&e.onLoadingStart();var r=document.getElementById(e.frameId);r&&r.parentNode.removeChild(r);var o=document.createElement("iframe");switch(i.isFirefox()?o.setAttribute("style","width: 1px; height: 100px; position: fixed; left: 0; top: 0; opacity: 0; border-width: 0; margin: 0; padding: 0"):o.setAttribute("style","visibility: hidden; height: 0; width: 0; position: absolute; border: 0"),o.setAttribute("id",e.frameId),"pdf"!==e.type&&(o.srcdoc="<html><head><title>"+e.documentTitle+"</title>",e.css&&(Array.isArray(e.css)||(e.css=[e.css]),e.css.forEach((function(e){o.srcdoc+='<link rel="stylesheet" href="'+e+'">'}))),o.srcdoc+="</head><body></body></html>"),e.type){case"pdf":if(i.isIE())try{console.info("Print.js doesn't support PDF printing in Internet Explorer."),window.open(e.fallbackPrintable,"_blank").focus(),e.onIncompatibleBrowser()}catch(t){e.onError(t)}finally{e.showModal&&a.close(),e.onLoadingEnd&&e.onLoadingEnd()}else v(e,o);break;case"image":x(e,o);break;case"html":y(e,o);break;case"raw-html":P(e,o);break;case"json":S(e,o)}},D=k;"undefined"!=typeof window&&(window.printJS=D),t.default=D}]).default},585:(e,t,n)=>{"use strict";
/*! art-template@runtime | https://github.com/aui/art-template */var r="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:{},i=Object.create(r),o=/["&'<>]/;function a(e){return"string"!=typeof e&&(e=null==e?"":"function"==typeof e?a(e.call(e)):JSON.stringify(e)),e}i.$escape=function(e){return function(e){var t=""+e,n=o.exec(t);if(!n)return e;var r="",i=void 0,a=void 0,l=void 0;for(i=n.index,a=0;i<t.length;i++){switch(t.charCodeAt(i)){case 34:l="&#34;";break;case 38:l="&#38;";break;case 39:l="&#39;";break;case 60:l="&#60;";break;case 62:l="&#62;";break;default:continue}a!==i&&(r+=t.substring(a,i)),a=i+1,r+=l}return a!==i?r+t.substring(a,i):r}(a(e))},i.$each=function(e,t){if(Array.isArray(e))for(var n=0,r=e.length;n<r;n++)t(e[n],n);else for(var i in e)t(e[i],i)},e.exports=i},779:(e,t,n)=>{"use strict";e.exports=n(585)},616:t=>{"use strict";t.exports=e},732:e=>{"use strict";e.exports=t}},r={};function i(e){var t=r[e];if(void 0!==t)return t.exports;var o=r[e]={exports:{}};return n[e](o,o.exports,i),o.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var o={};return(()=>{"use strict";function e(e,t,n,r,i,o,a){try{var l=e[o](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,i)}function t(t){return function(){var n=this,r=arguments;return new Promise((function(i,o){var a=t.apply(n,r);function l(t){e(a,i,o,l,s,"next",t)}function s(t){e(a,i,o,l,s,"throw",t)}l(void 0)}))}}function n(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):n(e,t)}function r(e,t){if(!n(e,t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function d(e,t,n){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n||e):i.value}},d(e,t,n||e)}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function p(e,t){return!t||"object"!=((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t;var n}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p(this,n)}}i.d(o,{default:()=>K});function g(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(s){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&l[0]?r.return:l[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,l[1])).done)return i;switch(r=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,r=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==l[0]&&2!==l[0])){a=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){a.label=l[1];break}if(6===l[0]&&a.label<i[1]){a.label=i[1],i=l;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(l);break}i[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(e){l=[6,e],r=0}finally{n=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,s])}}}Object.create;Object.create;"function"==typeof SuppressedError&&SuppressedError;var m=i(616),v=i(383),h=i.n(v),b=i(625),y=i.n(b);function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function P(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||P(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||P(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var S=i(973),E=i.n(S),C=i(732),k=m.PDFViewCtrl.Deps.jQuery,D=m.UIConsts.COMPONENT_EVENTS,F=m.PDFViewCtrl.Events,A=m.services,I=A.PortfolioLayoutService,$=A.PortfolioNodeService,T=function(e){c(i,e);var n=f(i);function i(e){var t;return r(this,i),(t=n.call(this,e)).startIndex=0,t.endIndex=0,t.pageCount=0,t.fromToArray=[],t.portfolio=!0,t.flag=!0,t}return l(i,[{key:"mounted",value:function(){var e=this;d(s(i.prototype),"mounted",this).call(this),this.$closeBtn=k(this.component.getComponentByName("print-dialog-close-btn").element),this.$okBtn=k(this.component.getComponentByName("print-dialog-ok-btn").element),this.$range=k(this.component.getComponentByName("range-item").element),this.$rangeFrom=k(this.component.getComponentByName("range-from").element),this.$rangeTo=k(this.component.getComponentByName("range-to").element),this.$rangeAssign=k(this.component.getComponentByName("range-assign").element),this.$printComments=k(this.component.getComponentByName("print-comments").element),this.$loading=k(".loading",k(this.component.element)),this.$printReversePages=k(this.component.getComponentByName("reverse-pages").element),this.$printWhat=k(this.component.getComponentByName("print-what").element),this.$printBleedMarks=k(this.component.getComponentByName("bleed-marks").element),this.component.on(D.SHOWN,(function(n){e._showParams=n||{},e.getPDFUI().getPDFViewer().then((function(t){e.hideHeaderFooter=t.getPrintSetting("hideHeaderFooter"),e.pageSize=t.getPrintSetting("pageSize")}));var r,i=e;e.getPDFUI().getCurrentPDFDoc().then((r=t((function(e){var t,n,r,o,a;return g(this,(function(l){switch(l.label){case 0:if(!e.pdfPortfolio)return[3,5];for(var s in t=[],n=i.getPDFUI().getServiceInstance($).getCurrentActivateNodes())t.push(n[s].data);return i.activedNodeData=t,r=i.getPDFUI().getServiceInstance(I).getLayoutMode(),i.layout=r,"cover"!=r?[3,1]:(i.portfolio=!1,[3,4]);case 1:return 0!=n.length?[3,2]:i.flag?(i.component.hide(),i.getPDFUI().alert({message:"viewer_:error.printNoPDF",level:"warning"}).then((function(){i.portfolio=!0,i.flag=!1,i.component.show()})),[3,4]):[2];case 2:return i.flag?(o="viewer_:error.printNoPDF",[4,e.pdfPortfolio.getPDFFileByPortFolioNode(t)]):[2];case 3:a=l.sent(),i.selectPDFFile=a,0==a.length?(i.getPDFUI().alert({message:o,level:"warning"}),i.component.hide()):"-1"!=a.indexOf("password")&&(i.component.hide(),i.getPDFUI().alert({message:o,level:"warning"}).then((function(){i.flag=!1,i.component.show()}))),i.portfolio=!0,l.label=4;case 4:return[3,6];case 5:i.portfolio=!1,l.label=6;case 6:return i.pageCount=e.getPageCount(),[2]}}))})),function(e){return r.apply(this,arguments)})),e._resetPrintForm(n)})),this.component.on(D.HIDDEN,(function(){e._showParams.cancelAfter&&e._showParams.cancelAfter(),e._showParams={},e.flag=!0,[e.$rangeFrom,e.$rangeTo,e.$rangeAssign].forEach((function(e){return e.removeClass("fv__print-error")})),e.$range.find('.fv__ui-force-hide input[type="radio"]:disabled').removeAttr("disabled")})),this._bindEvent();var n=function(e,t){t?_(e.querySelectorAll("input[type=radio]")).forEach((function(e){e.removeAttribute("type")})):_(e.querySelectorAll("input:not([type])")).forEach((function(e){e.setAttribute("type","radio")}))};if(this.$range.find(".fv__ui-force-hide").each((function(t){n(e.$range.find(".fv__ui-force-hide")[t],!0)})),window.MutationObserver){var r=new window.MutationObserver((function(e){e.forEach((function(e){n(e.target,e.target.classList.contains("fv__ui-force-hide"))}))}));r.observe(this.$range[0],{subtree:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["class"]}),this.addDestroyHook((function(){r.disconnect()}))}else{var o=function(e){var t=e.target;n(t,t.classList.contains("fv__ui-force-hide"))};this.$range[0].addEventListener("DOMSubtreeModified",o),this.addDestroyHook((function(){e.$range[0].removeEventListener("DOMSubtreeModified",o)}))}}},{key:"_resetPrintFormByNotPortfolio",value:function(){this.$range.find("[value='allPDF']").prop({disabled:!0}),this.$range.find("[value='selectedPDF']").prop({disabled:!0}),this.$range.find("[value='current']").prop({disabled:!1}),this.$range.find("[value='all']").prop({checked:"checked"}),this.$range.find("[value='all']").prop({disabled:!1}),this.$range.find("[value='assign']").prop({disabled:!1})}},{key:"_resetPrintFormByPortfolio",value:function(){this.$range.find("[value='current']").prop({disabled:!0}),this.$range.find("[value='all']").prop({disabled:!0}),this.$range.find("[value='assign']").prop({disabled:!0}),this.$range.find("[value='allPDF']").prop({disabled:!1})}},{key:"_resetPrintForm",value:function(e){var n=this;setTimeout((function(){var r,i=n;n.getPDFUI().getCurrentPDFDoc().then((r=t((function(t){var n,r,o;return g(this,(function(a){return t&&t.pdfPortfolio?(i.$printReversePages.prop({disabled:!1}),n=i.layout,r=i.activedNodeData,"cover"==n?i._resetPrintFormByNotPortfolio():0==r.length?(i.$range.find("[value='allPDF']").prop({checked:"checked"}),i.$range.find("[value='selectedPDF']").prop({disabled:!0}),i._resetPrintFormByPortfolio()):(0==(o=i.selectPDFFile||[]).length||"-1"!=o.indexOf("password")?(i.$range.find("[value='allPDF']").prop({checked:"checked"}),i.$range.find("[value='selectedPDF']").prop({disabled:!0})):(i.$range.find("[value='selectedPDF']").prop({checked:"checked"}),i.$range.find("[value='selectedPDF']").prop({disabled:!1})),i._resetPrintFormByPortfolio())):(i.$printReversePages.prop({disabled:!0}),i._resetPrintFormByNotPortfolio(),e?("printRange"===e.type&&i.setPrintRange(e),e.reverse&&i.$printReversePages.prop({checked:!0}),i.$printReversePages.prop({disabled:!1})):i.$printReversePages.prop({disabled:!0})),[2]}))})),function(e){return r.apply(this,arguments)})),n.$rangeAssign.val("").prop({disabled:!0}),n.$printComments.prop({checked:!1}),k(n.component.element.querySelector("[name=fv--print-hide-header-footer]")).prop({checked:"checked"}),n.component.getComponentByName("print-dropdown-quality").setValue(100),k(n.component.element).find(".fv__ui-quality-alert").hide(),n.$loading.hide()}),10)}},{key:"_bindEvent",value:function(){var e=this,n=this,r=this.getPDFUI();a(),l(),s(),this.$closeBtn.on("click",(function(){e.component.hide()}));var i=this.$range.find("[name='print-range']");i.on("change",(function(t){var n=t.target.value;switch(s(),e.$printReversePages.prop({disabled:!1}),n){case"current":e.$printReversePages.prop({disabled:!0}),l(),a();break;case"fromTo":e.$rangeFrom.prop({disabled:!1}),e.$rangeTo.prop({disabled:!1}),l();break;case"assign":e.$rangeAssign.prop({disabled:!1}),a();break;default:l(),a()}})),this.$rangeFrom.on("input",(function(t){var r=t.target.value;r>n.pageCount?e.$rangeFrom.val(n.pageCount):r>n.$rangeTo.val()&&n.$rangeTo.val(r)})),this.$rangeTo.on("input",(function(t){t.target.value>n.pageCount&&e.$rangeTo.val(n.pageCount)})),this.$rangeAssign.on("input",(function(){d()})),this.$okBtn.on("click",(function(){e.$loading.is(":visible")||(e._showParams.successAfter&&e._showParams.successAfter(),r.getPDFDocRender().then((function(i){if(!i.isPrinting()){var o=[[0,n.pageCount-1]],a={fromToArray:[]},l=a.rangeType=e.$range.find("[name='print-range']:checked").val();switch(l){case"allPDF":case"selectedPDF":case"all":a.startIndex=0,a.endIndex=n.pageCount-1;break;case"current":var s=i.getCurrentPageIndex();o=[[s,s]],a.startIndex=s,a.endIndex=a.startIndex;break;case"fromTo":if(a.startIndex=n.$rangeFrom.val()-1,a.endIndex=n.$rangeTo.val()-1,a.startIndex<0||a.startIndex>n.pageCount-1)return void e.showError(n.$rangeFrom);if(a.endIndex<0||a.endIndex>n.pageCount-1)return void e.showError(n.$rangeTo);break;default:var u;if(a.fromToArray=d()||[],a.fromToArray.length<1)return void e.getPDFUI().alert({message:"dialog.error.validateRange",level:"warning"});o=[],a.fromToArray.sort((function(e,t){return e[0]-t[0]})).forEach((function(e){if(o.length<1)return o.push(e),void(u=e);var t=e[0],n=e[1],r=u[1];t>=r?t>r+1?(o.push(e),u=e):u[1]=n:n>r&&(u[1]=n)}))}var c=e.$printReversePages.prop("checked"),p=e.$printWhat.val(),f=e.$printBleedMarks.prop("checked"),m={reverse:c,type:p,bleed:f,range:o,rangeType:l};if("selectedPDF"===l&&e.selectPDFFile&&e.selectPDFFile.length>0){var v=e.selectPDFFile.map((function(e){return e.id}));m.selectedIds=v}e.$loading.show();var h,b=i.doc,y=b.AdditionalActions?Promise.resolve():b.loadAdditionalActions(),w=e;y.then((function(e){i.setPrintState(!0),i.performAction(5),r.eventEmitter.emit(F.documentWillPrint)})).then((h=t((function(e){var t,a;return g(this,(function(e){switch(e.label){case 0:return[4,b.isXFA()];case 1:return e.sent()?[4,r.pdfViewer.getWebPDFJR()]:[3,4];case 2:return[4,e.sent().getAllModuleLicenseRight()];case 3:if(e.sent().xfa)return t=w.component.getComponentByName("print-dropdown-quality").getValue(),a=function(e,t){var n=[];return e.forEach((function(e){if(1===e.length)(0,C.isInteger)(e)||(e=0),e<0?e=0:e>t-1&&(e=t-1),n.push(e);else if(2===e.length){var r=e[0];(0,C.isInteger)(r)||(r=0),r<0?r=0:r>t-1&&(r=t-1);var i=e[1];(0,C.isInteger)(i)||(i=0),i<0?i=0:i>t-1&&(i=t-1),r>i&&(r=+i,r-=i=r-i);for(var o=r;o<=i;o++)n.push(o)}})),n}(o,n.pageCount),[2,r.pdfViewer.print({isPortfolio:!1,rangeType:l,pages:c?a.reverse():a,printType:["page"],quality:t,showHeaderFooter:!1}).then((function(){i.performAction(6),r.eventEmitter.emit(F.documentDidPrint),i.setPrintState(!1),w.$loading.hide(),w.component.hide()}))];e.label=4;case 4:return b.PDFForm.addTask((function(e){return b.saveWinlessData().then((function(){return b.extractPrintPages(m)})).then((function(e){if(e){var t={printable:e=window.btoa(e),type:"pdf",base64:!0,frameRemoveDelay:1e3};"function"==typeof r.pdfViewer.printHandler?(m={data:t.printable,type:Number(m.type),range:m.range},r.pdfViewer.printHandler(m)):E()(t)}i.performAction(6),r.eventEmitter.emit(F.documentDidPrint),i.setPrintState(!1),w.$loading.hide(),w.component.hide()}))}),!0),[2]}}))})),function(e){return h.apply(this,arguments)}))}})))}));var o=this.component.getComponentByName("print-dropdown-quality");function a(){n.$rangeFrom.prop({disabled:!0}),n.$rangeTo.prop({disabled:!0})}function l(){n.$rangeAssign.prop({disabled:!0})}function s(){k(".fv__print-error").removeClass("fv__print-error")}function d(){s();var e=[],t=n.$rangeAssign.val(),r=new RegExp(/[^\d\-,]/);if(r.test(t))n.$rangeAssign.val(t.slice(0,t.length-1));else{if(!(r=new RegExp(/[^\d]/)).test(t.substr(0,1))){for(var i=t.split(","),o=0;o<i.length;o++){var a=i[o];if(a.indexOf("-")>-1){var l=x(a.split("-"),3),d=l[0],u=l[1];if(l[2]||""===u)return void n.showError(n.$rangeAssign);var c=Math.min(+d,+u),p=Math.max(+d,+u);if(c<1)return void n.showError(n.$rangeAssign);if(p>n.pageCount)return p+="",void n.$rangeAssign.val(t.slice(0,t.length-p.length)+n.pageCount);e.push([c-1,p-1])}else{if(a<1)return void n.showError(n.$rangeAssign);if(a>n.pageCount)return void n.$rangeAssign.val(t.slice(0,t.length-a.length)+n.pageCount);e.push([a-1,a-1])}}return e}n.$rangeAssign.val(t.slice(0,t.length-1))}}o.on("change",(function(t){var n=k(e.component.element).find(".fv__ui-quality-alert");o.getValue()>500?n.show():n.hide()})),this.addDestroyHook((function(){i.off("change"),e.$rangeFrom.off("input"),e.$rangeTo.off("input"),e.$okBtn.off("click")}))}},{key:"showError",value:function(e){e.addClass("fv__print-error")}},{key:"setPrintRange",value:function(e){this.$range.find("[value='"+e.radioValue+"']").prop("checked",!0),"assign"===e.radioValue&&(this.$rangeAssign.prop("disabled",!1),this.$rangeAssign.val(e.pages))}}]),i}(m.Controller);var O=m.PDFViewCtrl,N=m.shared.keyboard.BuiltinPDFUIShortcutCommand,B=O.keyboard.BuiltinShortcutContext,j=O.BrowserInfo,M=j.isSafari,R=j.isChrome,L=j.isFirefox,U=j.isChromiumEdge,V=O.DeviceInfo,H=(V.isMac,V.isMobile);var q=function(e){c(i,e);var n=f(i);function i(e){var t;return r(this,i),(t=n.call(this,e)).promiseBind=!1,t}return l(i,[{key:"mounted",value:function(){var e=this;d(s(i.prototype),"mounted",this).call(this),this.getPDFUI().getKeyboard().then((function(t){t.withContext(B.VIEWER,(function(t){t.keydown(N.SHOW_PRINT_DIALOG,(function(){e.component.isLocked||e.handle()}))}))}))}},{key:"handle",value:function(){var e=this;if(this.getPDFUI().checkAppSignIn()){var n=Promise.resolve(this.getComponentByName("print-dialog"));0,!H||R||M?n.then((function(n){var r;e.getPDFUI().activeElement(null),e.getPDFUI().getPDFViewer().then((r=t((function(e){var t,r,i,o,a;return g(this,(function(l){switch(l.label){case 0:return[4,null===(t=e.currentPDFDoc)||void 0===t?void 0:t.isXFA()];case 1:return l.sent()?n.element.addClass("fv__print-dialog-xfa"):n.element.removeClass("fv__print-dialog-xfa"),r=n.getComponentByName("fv--print-header-footer-container"),R||L||U?(r&&r.show(),(i=n.element.querySelector("[name=fv--print-hide-header-footer]"))&&(i.checked=e.getPrintSetting("showHeaderFooter"))):r&&r.hide(),(o=n.element.querySelector(".fv__ui-quality-alert"))&&(o.style.display="none"),(a=n.getComponentByName("print-dropdown-quality"))&&a.setValue(e.getPrintSetting("quality")),n.open(document.body),[2]}}))})),function(e){return r.apply(this,arguments)}))})):this.getPDFUI().alert("print:dialog.unsupported.message","print:dialog.unsupported.title")}}},{key:"destroy",value:function(){d(s(i.prototype),"destroy",this).call(this),!1}}],[{key:"getName",value:function(){return"ShowPrintDialogController"}},{key:"permission",get:function(){return 2052}}]),i}(m.Controller),W=m.shared.replaceRibbonButton2XButton,z=m.Controller,J=m.PDFViewCtrl.BrowserInfo,X=J.isChrome,G=J.isFirefox,Z=J.isChromiumEdge,K=function(e){c(i,e);var n=f(i);function i(){return r(this,i),n.apply(this,arguments)}return l(i,[{key:"init",value:function(e){this.pdfUI=e}},{key:"fragments",value:function(){return[]}},{key:"showPrintDialog",value:function(){var e=this,n=arguments;return t((function(){var t;return g(this,(function(r){return t=Array.prototype.slice.call(n,0)[0],e.pdfUI.activeElement(null),[2,e.pdfUI.getPDFViewer().then((function(n){return e.pdfUI.getRootComponent().then((function(r){var i=r.querySelector("@print:print-dialog");return i?e._updatePrintDialog(n,i,t):Promise.reject(new Error("<@print:print-dialog> cannot be not found in layout template"))}))}))]}))}))()}},{key:"receiveAction",value:function(e,t){return d(s(i.prototype),"receiveAction",this).call(this,e,t)}},{key:"updateXFAUI",value:function(e){var n=this;return t((function(){var t,r;return g(this,(function(i){switch(i.label){case 0:return n.dialog?(r=n.dialog,[4,null===(t=e.currentPDFDoc)||void 0===t?void 0:t.isXFA()]):[2];case 1:return i.sent()?r.element.addClass("fv__print-dialog-xfa"):r.element.removeClass("fv__print-dialog-xfa"),[2]}}))}))()}},{key:"_updatePrintDialog",value:function(e,n,r){var i=this;return t((function(){var t;return g(this,(function(o){return n?(i.updateXFAUI(e),t=n.getComponentByName("fv--print-header-footer-container"),X||G||Z?(t.show(),n.element.querySelector("[name=fv--print-hide-header-footer]").checked=e.getPrintSetting("showHeaderFooter")):t.hide(),n.getComponentByName("print-dropdown-quality").setValue(e.getPrintSetting("quality")),n.open(document.body,r),[2]):[2,Promise.reject(new Error("print-dialog cannot be found, Please confirm this component has been defined in layout-template."))]}))}))()}}],[{key:"getName",value:function(){return"print"}},{key:"getLoader",value:function(){return h()}},{key:"initOnLoad",value:function(){var e=m.modular.module("print",[]);e.registerController(q),e.registerPreConfiguredComponent("contextmenu-item-print",{template:'<contextmenu-item name="fv--contextmenu-item-print" @controller="print:ShowPrintDialogController" shortcut="Ctrl + P">print:button-tooltip.title</contextmenu-item>'});var t={template:'<ribbon-button text="print:button-tooltip.title" @tooltip name="print-button" icon-class="fv__icon-toolbar-print" @controller="print:ShowPrintDialogController">print:button-tooltip.title</ribbon-button>',config:[{target:"print-button",tooltip:{title:"print:button-tooltip.title"}}]};e.registerPreConfiguredComponent("print-ribbon-button",t),e.registerPreConfiguredComponent("print-button",Object.assign({},t,{template:W(t.template)}));var n=function(e){c(n,e);var t=f(n);function n(){return r(this,n),t.apply(this,arguments)}return l(n,[{key:"mounted",value:function(){var e=this.component.findClosestComponent((function(e){return"print-dialog"===e.name}));this.printDialogController=e.controller}}]),n}(z);e.registerFragment("print-dialog",{template:y()(),config:[{target:"print-dialog",callback:T},{target:"fv--print-hide-header-footer",callback:function(e){c(n,e);var t=f(n);function n(){return r(this,n),t.apply(this,arguments)}return l(n,[{key:"mounted",value:function(){var e=this;d(s(n.prototype),"mounted",this).call(this),this.component.setValue(this.printDialogController.hideHeaderFooter),this.component.on("change",(function(){e.printDialogController.hideHeaderFooter=e.component.getValue()}))}}]),n}(n)}]})}}]),i}(m.UIXAddon)})(),o=o.default})()));