!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("UIExtension")):"function"==typeof define&&define.amd?define(["UIExtension"],e):"object"==typeof exports?exports.EditTextObject=e(require("UIExtension")):t.EditTextObject=e(t.UIExtension)}(self,(t=>(()=>{var e={218:(t,e,n)=>{n(779);t.exports=function(t){"use strict";t=t||{};return'<div class="fv__ui-addon-font-family-size-dropdown" @controller="edit-text-object:FontFamilySizeController as ffsc">\n<dropdown name="font-family-dropdown" class="fv__ui-addon-font-family-dropdown" @tooltip tooltip-title="edit-text:dropdowns.editFontFamily" separate="false" selectable="true">\n<dropdown-button \n@foreach="fontFamily in ffsc.fontFamilies" \n@sync.text="fontFamily.text" \n@sync.attr.style="ffsc.renderFontFamilyItem(fontFamily)"\n@on.click="ffsc.selectFontFamily(fontFamily)"\ntabindex="0"\n></dropdown-button>\n</dropdown>\n<dropdown name="font-size-dropdown" editable="true" class="fv__ui-addon-font-size-dropdown" @tooltip tooltip-title="edit-text:dropdowns.editFontSize"  selectable="true">\n<dropdown-button\n@foreach="fontSize in ffsc.fontSizes"\n@sync.text="fontSize"\n@on.click="ffsc.selectFontSize(fontSize)"\ntabindex="0"\n></dropdown-button>\n</dropdown>\n</div>','<div class="fv__ui-addon-font-family-size-dropdown" @controller="edit-text-object:FontFamilySizeController as ffsc">\n<dropdown name="font-family-dropdown" class="fv__ui-addon-font-family-dropdown" @tooltip tooltip-title="edit-text:dropdowns.editFontFamily" separate="false" selectable="true">\n<dropdown-button \n@foreach="fontFamily in ffsc.fontFamilies" \n@sync.text="fontFamily.text" \n@sync.attr.style="ffsc.renderFontFamilyItem(fontFamily)"\n@on.click="ffsc.selectFontFamily(fontFamily)"\ntabindex="0"\n></dropdown-button>\n</dropdown>\n<dropdown name="font-size-dropdown" editable="true" class="fv__ui-addon-font-size-dropdown" @tooltip tooltip-title="edit-text:dropdowns.editFontSize"  selectable="true">\n<dropdown-button\n@foreach="fontSize in ffsc.fontSizes"\n@sync.text="fontSize"\n@on.click="ffsc.selectFontSize(fontSize)"\ntabindex="0"\n></dropdown-button>\n</dropdown>\n</div>'}},566:t=>{t.exports=null},585:(t,e,n)=>{"use strict";
/*! art-template@runtime | https://github.com/aui/art-template */var o="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:{},r=Object.create(o),i=/["&'<>]/;function a(t){return"string"!=typeof t&&(t=null==t?"":"function"==typeof t?a(t.call(t)):JSON.stringify(t)),t}r.$escape=function(t){return function(t){var e=""+t,n=i.exec(e);if(!n)return t;var o="",r=void 0,a=void 0,c=void 0;for(r=n.index,a=0;r<e.length;r++){switch(e.charCodeAt(r)){case 34:c="&#34;";break;case 38:c="&#38;";break;case 39:c="&#39;";break;case 60:c="&#60;";break;case 62:c="&#62;";break;default:continue}a!==r&&(o+=e.substring(a,r)),a=r+1,o+=c}return a!==r?o+e.substring(a,r):o}(a(t))},r.$each=function(t,e){if(Array.isArray(t))for(var n=0,o=t.length;n<o;n++)e(t[n],n);else for(var r in t)e(t[r],r)},t.exports=r},779:(t,e,n)=>{"use strict";t.exports=n(585)},616:e=>{"use strict";e.exports=t}},n={};function o(t){var r=n[t];if(void 0!==r)return r.exports;var i=n[t]={exports:{}};return e[t](i,i.exports,o),i.exports}o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var r={};return(()=>{"use strict";function t(e,n){return null!=n&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?!!n[Symbol.hasInstance](e):t(e,n)}function e(e,n){if(!t(e,n))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function i(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),t}function a(t,e){return a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},a(t,e)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function s(t,e){return!e||"object"!=((n=e)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e;var n}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=l(t);if(e){var r=l(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return s(this,n)}}o.d(r,{default:()=>P});var f=o(616),d=o(566),p=o.n(d);function h(t,e,n){return h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n||t):r.value}},h(t,e,n||t)}var m=function(t){c(o,t);var n=u(o);function o(){return e(this,o),n.apply(this,arguments)}return i(o,[{key:"mounted",value:function(){var t=this;h(l(o.prototype),"mounted",this).call(this),this.addDestroyHook(this.getPDFUI().addViewerEventListener(f.PDFViewCtrl.Events.switchStateHandler,(function(e){if("add-text-object"===e.getStateName())t.component.enable();else t.component.disable()})))}}]),o}(f.Controller),y=f.PDFViewCtrl._internal.consts.ADD_FONT_MAP_LIST,v="standard",b="ext",g=function(t){c(o,t);var n=u(o);function o(t){var r;e(this,o),r=n.call(this,t);var i=window.EditTextObject,a=i.addonInfo,c=a.standardFontFamilies||[],l=a.extensionFontFamilies||[];return r.standardFontFamilies=c,r.extensionFontFamilies=l,c.forEach((function(t){t.type=v})),l.forEach((function(t){t.type=b})),r.fontFamilies=c.concat(l),r.fontSizes=i.addonInfo.customFontSizes||[],r.currentTextObjects=[],r}return i(o,[{key:"mounted",value:function(){var t=this;h(l(o.prototype),"mounted",this).call(this),this.selectFontFamily(this.fontFamilies[0]),this.fontSizes.indexOf(16)>-1?this.selectFontSize(16):this.selectFontSize(this.fontSizes[0]),this.digest(!0),this.addDestroyHook(this.getPDFUI().addViewerEventListener("text-object-active",(function(e){t.currentTextObjects.push(e),1===t.currentTextObjects.length&&t.active(e)})),this.getPDFUI().addViewerEventListener("text-object-unactive",(function(e){var n=t.currentTextObjects.indexOf(e);n>-1&&t.currentTextObjects.splice(n,1),0===t.currentTextObjects.length&&t.deactive(e)})),this.getPDFUI().addViewerEventListener(f.PDFViewCtrl.Events.openFileSuccess,(function(){t.component.disable()})),this.component.on("change",(function(e,n){if(0!==t.currentTextObjects.length)switch(e){case"fontFamily":for(var o=t.fontFamilies,r=o.length,i="string"==typeof n,a=!1,c=0;c<r;c++){var l=o[c];if(i&&l.text===n||l.name===n){t.applyFontFamily(l),a=!0;break}}i||a||t.applyFontFamily(n);break;case"fontSize":(n=+n)>100?n=100:n<.1&&(n=.1),t.applyFontSize(n)}}))),this.getPDFUI().getStore().then((function(e){t.addDestroyHook(e.subscribe(y,(function(e){var n=e.new;n.slice(0).map((function(t){t.text=t.name,t.type=b})),t.fontFamilies=t.fontFamilies.concat(n),t.digest(!0)})))}))}},{key:"active",value:function(t){var e=this;this.component.enable();var n=t.getModel().info.textState.vertical_size,o=f.PDFViewCtrl.shared.units,r=o.POINT.convertTo(n,o.PIXEL_HORIZONTAL);this.component.selectFontSize(r);this.component.selectFontFamily(function(t){var n=t.getModel().getFontInfo();if(n.isStandard){for(var o=0,r=e.standardFontFamilies.length;o<r;o++){var i=e.standardFontFamilies[o];if(i.value===n.standardId)return i}return{text:n.baseName,value:n.standardId,standard:!0,type:"standard"}}return{text:n.familyName,name:n.familyName,style:n.styles,charset:n.charset,type:"ext"}}(t))}},{key:"deactive",value:function(){this.component.disable()}},{key:"selectFontFamily",value:function(t){var e=this.component.currentFontFamily;this.component.selectFontFamily(t),this.changeFocusElement("fontFamily"),JSON.stringify(e)!==JSON.stringify(t)&&this.component.trigger("change","fontFamily",t,e)}},{key:"applyFontFamily",value:function(t){0!==this.currentTextObjects.length&&this.currentTextObjects.forEach((function(e){var n=e.getModel();switch(t.type){case v:n.setStandardFont(t.value).then((function(){return n.setText(e.getTextChar())})).then((function(t){e.reActive()}));break;case b:n.setFontByName(t.name,t.style,t.charset).then((function(){return n.setText(e.getTextChar())})).then((function(t){e.reActive()}))}}))}},{key:"selectFontSize",value:function(t){var e=this.component.currentFontSize;this.component.selectFontSize(t),this.changeFocusElement("fontSize"),e!=t&&this.component.trigger("change","fontSize",t,e)}},{key:"applyFontSize",value:function(t){0!==!this.currentTextObjects.length&&this.currentTextObjects.forEach((function(e){var n=f.PDFViewCtrl.shared.units,o=e.getModel();o.setFontSize(n.PIXEL_HORIZONTAL.convertTo(t,n.POINT)).then((function(){return o.setText(e.getTextChar())})).then((function(t){e.reActive()}))}))}},{key:"renderFontFamilyItem",value:function(t){return"Symbol"===t.text?"":'font-family: "'.concat(t.name||t.text,'"')}},{key:"changeFocusElement",value:function(t){var e=this;setTimeout((function(){var n=null;switch(t){case"fontFamily":n=e.getComponentByName("font-family-dropdown");break;case"fontSize":n=e.getComponentByName("font-size-dropdown")}if(1===e.currentTextObjects.length){var o=e.currentTextObjects[0].eCharInput;o&&o.focus()}else n&&n.togglerElement.focus()}),10)}}],[{key:"getName",value:function(){return"FontFamilySizeController"}}]),o}(m),x=o(218),F=o.n(x),w=function(t){c(o,t);var n=u(o);function o(t,r,i){return e(this,o),n.call(this,t,r,i)}return i(o,[{key:"createDOMElement",value:function(){return document.createElement("div")}},{key:"isContainer",value:function(){return!1}},{key:"postlink",value:function(){var t=this;h(l(o.prototype),"postlink",this).call(this),this.disable(),this.fontFamilyDropdownComponent=this.getComponentByName("font-family-dropdown"),this.fontSizeDropdownComponent=this.getComponentByName("font-size-dropdown"),this.fontFamilyDropdownText=this.fontFamilyDropdownComponent.textElement,this.fontFamilyDropdownComponent.align=this.align,this.fontSizeDropdownComponent.align=this.align,this.addDestroyHook(this.fontSizeDropdownComponent.on("change",(function(e){t.trigger("change","fontSize",e)})),this.fontFamilyDropdownComponent.on("change",(function(e){t.trigger("change","fontFamily",e)})))}},{key:"getFontFamily",value:function(){return this.currentFontFamily}},{key:"selectFontFamily",value:function(t){var e=this.fontFamilyDropdownComponent.findChildren((function(e){return e.controller.data.fontFamily===t}))[0];e&&this.fontFamilyDropdownComponent.select(e),this.fontFamilyDropdownComponent.setText(t.text),"Symbol"===t.text?this.fontFamilyDropdownText.style.cssText+="font-family: inherit":this.fontFamilyDropdownText.style.cssText+='font-family: "'.concat(t.name||t.text,'"'),this.currentFontFamily=t}},{key:"selectFontSize",value:function(t){var e=this.fontSizeDropdownComponent.findChildren((function(e){return e.controller.data.fontSize===t}))[0];e&&this.fontSizeDropdownComponent.select(e),this.fontSizeDropdownComponent.setEditValue(t),this.currentFontSize=t}},{key:"getFontSize",value:function(){return this.currentFontSize}}],[{key:"getName",value:function(){return"font-family-size-dropdown"}},{key:"getMetadata",value:function(){return{options:{align:{type:"enum",enums:["left","center","right","client-center"],defaultValue:"left"}}}}}]),o}(f.SeniorComponentFactory.createSuperClass({template:F()(),fragments:[{target:"font-family-dropdown",config:{}},{target:"font-size-dropdown",config:{editOptions:{type:"number",step:.1}}}]})),C=function(t){c(o,t);var n=u(o);function o(t){var r;return e(this,o),(r=n.call(this,t)).currentTextObjects=[],r}return i(o,[{key:"postlink",value:function(){var t=this;this.component.disable(),this.addDestroyHook(this.getPDFUI().addViewerEventListener("text-object-active",(function(e){t.currentTextObjects.push(e),t.component.enable(),t.active(e)})),this.getPDFUI().addViewerEventListener("text-object-unactive",(function(e){var n=t.currentTextObjects.indexOf(e);n>-1&&t.currentTextObjects.splice(n,1),t.deactive(e),0===t.currentTextObjects.length&&t.component.disable()})))}},{key:"active",value:function(t){}},{key:"deactive",value:function(t){}}]),o}(m),S=function(t){c(o,t);var n=u(o);function o(){return e(this,o),n.apply(this,arguments)}return i(o,[{key:"active",value:function(t){t.getModel().isBold()?this.component.active():this.component.deactive()}},{key:"handle",value:function(){var t=this;0!==this.currentTextObjects.length?this.currentTextObjects.forEach((function(e){var n=e.getModel();t.component.isActive?n.setBold(!1).then((function(){return n.setText(e.getTextChar())})).then((function(t){e.reActive()})):n.setBold(!0).then((function(){return n.setText(e.getTextChar())})).then((function(t){e.reActive()}))})):this.component.isActive?this.component.deactive():this.component.active()}}],[{key:"getName",value:function(){return"BoldStyleController"}}]),o}(C),k=function(t){c(o,t);var n=u(o);function o(){return e(this,o),n.apply(this,arguments)}return i(o,[{key:"active",value:function(t){t.getModel().isItalic()?this.component.active():this.component.deactive()}},{key:"handle",value:function(){var t=this;0!==this.currentTextObjects.length?this.currentTextObjects.forEach((function(e){var n=e.getModel();t.component.isActive?n.setItalic(!1).then((function(){return n.setText(e.getTextChar())})).then((function(t){e.reActive()})):n.setItalic(!0).then((function(){return n.setText(e.getTextChar())})).then((function(t){e.reActive()}))})):this.component.isActive?this.component.deactive():this.component.active()}}],[{key:"getName",value:function(){return"ItalicStyleController"}}]),o}(C),j=function(t){c(o,t);var n=u(o);function o(){return e(this,o),n.apply(this,arguments)}return i(o,[{key:"active",value:function(t){t.getModel().info.textState.font}}],[{key:"getName",value:function(){return"UnderlineStyleController"}}]),o}(C),T=function(t){c(o,t);var n=u(o);function o(){return e(this,o),n.apply(this,arguments)}return i(o,[{key:"isContainer",value:function(){return!1}},{key:"postlink",value:function(){var t=this;h(l(o.prototype),"postlink",this).call(this),this.disable();var e=this.eIcon,n=document.createElement("i");n.classList.add("fv__ui-addon-textobject-color-status"),e.appendChild(n);var r=this.getComponentByName("addon-textobject-color-picker");this.colorPicker=r,this.colorStatuesElement=n;var i=function(t){var e=Array.from(t.target.classList).concat(["fv__ui-picker-addcolor","fv__ui-picker-removecolor","fv__ui-property-icon-delete-color-dark","fv__ui-property-icon-delete-color-light"]),n=new Set(e);e.length!==n.size&&t.stopPropagation()},a=function(e){var n=Array.from(e.target.classList).concat(["fv__ui-picker-addcolor","fv__ui-picker-removecolor","fv__ui-property-icon-delete-color-dark","fv__ui-property-icon-delete-color-light"]),o=new Set(n);if(n.length===o.size){var r=t.getDropdown();r.isActive&&(r.doDeactive(),r.parent.focus())}};r.element.addEventListener("mouseup",i),r.element.addEventListener("click",a),this.addDestroyHook((function(){r.element&&r.element.removeEventListener("mouseup",i),r.element&&r.element.removeEventListener("click",a)})),this.setColor("#000000");var c=function(){t.freeze()},s=function(){t.unfreeze()};r.on("change",(function(e,n){t.updateColorStatus(n),t.trigger("change",n),t.controller.handle(n)})),r.on("postrender",(function(){r.$colorInput.off("show.spectrum",c).on("show.spectrum",c),r.$colorInput.off("hide.spectrum",s).on("hide.spectrum",s)})),r.trigger("postrender")}},{key:"setColor",value:function(t){this.colorPicker.setValue(t),this.updateColorStatus(t)}},{key:"getColor",value:function(){return this.colorPicker.getValue()}},{key:"updateColorStatus",value:function(t){this.colorStatuesElement.style.cssText+="background-color: ".concat(t)}},{key:"doActive",value:function(){h(l(o.prototype),"doActive",this).call(this),this.colorPicker.focus()}}],[{key:"getName",value:function(){return"text-color-picker"}}]),o}(f.SeniorComponentFactory.createSuperClass({template:'\n        <ribbon-button icon-class="fv__icon-addon-textobject-font-color" @tooltip tooltip-title="edit-text:buttons.editFontColor" text="edit-text:buttons.editFontColor" not-immediately="true">\n            <dropdown class="fv__ui-addon-textobject-font-color" separate="false">\n                <dropdown-item> \n                    <color class="fv__ui-addon-textobject-color-picker" name="addon-textobject-color-picker"></color>\n                </dropdown-item> \n            </dropdown>\n        </ribbon-button>\n    ',fragments:[{target:"addon-textobject-color-picker",config:{colors:["#ff6633","#ff00ff","#ffcc00","#00ffff","#00ff00","#ffff00","#ff0000","#993399","#cc99ff","#ff99cc","#0000ff","#66cc33","#000000","#333333","#666666","#999999","#cccccc","#ffffff"],transparentclass:"fv__ui-property-icon-nocolor",addclass:"fv__ui-property-icon-add-color",removeclass:"fv__ui-property-icon-remove-color",deleteclass:"fv__ui-property-icon-delete-color-",selectedclass:"fv__ui-property-icon-selected-color-",lightpostname:"light",darkpostname:"dark"}}]})),O=function(t){c(o,t);var n=u(o);function o(t){var r;return e(this,o),(r=n.call(this,t)).currentTextObjects=[],r}return i(o,[{key:"mounted",value:function(){var t=this;h(l(o.prototype),"mounted",this).call(this),this.addDestroyHook(this.getPDFUI().addViewerEventListener("text-object-active",(function(e){if(t.currentTextObjects.push(e),!(t.currentTextObjects.length>2)){t.component.enable();var n=e.getModel().getFillColor(),o=16777215&n;0===(n>>24&255)?t.component.setColor("transparent"):t.component.setColor(function(t){if(t<0)return"#000000";var e=t.toString(16),n=6;t>16777215&&(n=8);for(;e.length<n;)e="0"+e;return"#"+e}(o))}})),this.getPDFUI().addViewerEventListener("text-object-unactive",(function(e){var n=t.currentTextObjects.indexOf(e);n>-1&&t.currentTextObjects.splice(n,1),0===t.currentTextObjects.length&&t.component.disable()})),this.getPDFUI().addViewerEventListener(f.PDFViewCtrl.Events.openFileSuccess,(function(){t.component.disable()})))}},{key:"handle",value:function(t){0!==this.currentTextObjects.length&&this.currentTextObjects.forEach((function(e){var n=e.getModel();if("transparent"===t)n.setFillColor(0).then((function(){return n.setText(e.getTextChar())})).then((function(){e.reActive()}));else{var o=parseInt(t.substring(1),16);n.setFillColor(255<<24|o).then((function(){return n.setText(e.getTextChar())})).then((function(){e.reActive()}))}}))}}],[{key:"getName",value:function(){return"FontColorController"}}]),o}(m);function _(t,e,n,o,r,i,a){try{var c=t[i](a),l=c.value}catch(t){return void n(t)}c.done?e(l):Promise.resolve(l).then(o,r)}function z(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&c[0]?o.return:c[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,c[1])).done)return r;switch(o=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,o=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){a.label=c[1];break}if(6===c[0]&&a.label<r[1]){a.label=r[1],r=c;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(c);break}r[2]&&a.ops.pop(),a.trys.pop();continue}c=e.call(t,a)}catch(t){c=[6,t],o=0}finally{n=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}}Object.create;Object.create;"function"==typeof SuppressedError&&SuppressedError;var I=function(t){c(o,t);var n=u(o);function o(t){var r;return e(this,o),(r=n.call(this,t,"add-text-object")).isStateIn=!1,r}return i(o,[{key:"mounted",value:function(){var t,e=this,n=this;return(t=function(){var t,r,i,a,c,s;return z(this,(function(u){switch(u.label){case 0:return h(l(o.prototype),"mounted",e).call(n),[4,(t=n.component.getRoot()).getMountedComponentByName("fv--addon-textobject-font-family-size-dropdown")];case 1:return r=u.sent(),[4,t.getMountedComponentByName("fv--addon-textobject-bold-style")];case 2:return i=u.sent(),[4,t.getMountedComponentByName("fv--addon-textobject-italic-style")];case 3:return a=u.sent(),[4,t.getMountedComponentByName("fv--addon-textobject-font-color")];case 4:return c=u.sent(),s=function(){n.isStateIn&&n.updateUIData()},n.addDestroyHook(r.on("change",s),i.on("active",s),a.on("active",s),i.on("deactive",s),a.on("deactive",s),c.on("change",s)),n.fontFamilySizeDropdown=r,n.boldStyleButton=i,n.italicStyleButton=a,n.fontColorDropdown=c,[2]}}))},function(){var e=this,n=arguments;return new Promise((function(o,r){var i=t.apply(e,n);function a(t){_(i,o,r,a,c,"next",t)}function c(t){_(i,o,r,a,c,"throw",t)}a(void 0)}))})()}},{key:"updateUIData",value:function(){var t=this.fontFamilySizeDropdown.getFontFamily(),e=this.fontFamilySizeDropdown.getFontSize(),n=f.PDFViewCtrl.shared.units,o=n.PIXEL_HORIZONTAL.convertTo(e,n.POINT),r={};switch(t.type){case"standard":r.standardId=t.value;break;case"ext":r.name=t.name,r.styles=t.style,r.charset=t.charset}var i=this.fontColorDropdown.getColor(),a=0;"transparent"!==i&&(a=4278190080|parseInt(i.substring(1),16));var c={fontSize:o,weight:this.boldStyleButton.isActive?700:400,italic:this.italicStyleButton.isActive,fillColor:a,font:r};this.getPDFUI().eventEmitter.emit("add-text-object-param-transfer",c),this.getPDFUI().getStore().then((function(t){t.dispatch("add-text-object-param-transfer",c)}))}},{key:"stateOut",value:function(){this.isStateIn=!1}},{key:"stateIn",value:function(){this.isStateIn=!0,this.updateUIData()}}],[{key:"getName",value:function(){return"AddTextStateController"}},{key:"permission",get:function(){return f.PDFViewCtrl.Consts.PDFDocPermission.ModifyDocument}}]),o}(f.StatefulController);const D=f.StatefulController.ext("edit-text","EditTextStateController");var E=f.shared.replaceRibbonButton2XButton,P=(f.UIConsts.FRAGMENT_ACTION,function(t){c(o,t);var n=u(o);function o(){return e(this,o),n.apply(this,arguments)}return i(o,[{key:"beforeMounted",value:function(t){var e=t.getComponentByName("edit-tab");e&&e.show()}},{key:"fragments",value:function(){return[]}}],[{key:"getName",value:function(){return"editTextObject"}},{key:"getLoader",value:function(){return p()}},{key:"initOnLoad",value:function(){var t=f.modular.module("edit-text-object",[]);t.registerController(g),t.registerController(S),t.registerController(k),t.registerController(j),t.registerController(O),t.registerController(I),t.registerController(D),t.registerComponent(w),t.registerComponent(T),[{name:"add-text-button",template:'<ribbon-button name="fv--addon-add-text-button" icon-class="fv__icon-addon-textobject-add-text" @controller="edit-text-object:AddTextStateController" @tooltip tooltip-title="edit-text:buttons.addText">edit-text:buttons.addText</ribbon-button>'},{name:"text-bold-style-button",template:'<ribbon-button name="fv--addon-textobject-bold-style" icon-class="fv__icon-addon-textobject-bold" @controller="edit-text-object:BoldStyleController" @tooltip tooltip-title="edit-text:buttons.editFontWeight">edit-text:buttons.editFontWeight</ribbon-button>'},{name:"text-italic-style-button",template:'<ribbon-button name="fv--addon-textobject-italic-style" icon-class="fv__icon-addon-textobject-italic" @controller="edit-text-object:ItalicStyleController" @tooltip tooltip-title="edit-text:buttons.editFontItalic">edit-text:buttons.editFontItalic</ribbon-button>'}].forEach((function(e){var n=Object.assign({},e,{template:E(e.template)}),o=Object.assign({},e,{name:e.name.replace(/-button$/,"-ribbon-button")});t.registerPreConfiguredComponent(n.name,n),t.registerPreConfiguredComponent(o.name,o)})),[{name:"font-color-picker",template:'<edit-text-object:text-color-picker name="fv--addon-textobject-font-color" align="center" @controller="edit-text-object:FontColorController">'},{name:"font-style-dropdown",template:'<edit-text-object:font-family-size-dropdown name="fv--addon-textobject-font-family-size-dropdown">'}].forEach((function(e){t.registerPreConfiguredComponent(e.name,e)}))}}]),o}(f.UIXAddon));Object.assign(f.addons,{path_objects:{AddTextStateController:I,BoldStyleController:S,ItalicStyleController:k}})})(),r=r.default})()));